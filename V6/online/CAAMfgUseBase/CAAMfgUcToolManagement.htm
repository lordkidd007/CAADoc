<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
<link href="../CAADocStyleSheets/caav5.css" rel="stylesheet" type="text/css"/>
<script src="../CAADocJavaScript/DSDocTocToc.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/DSDocHighlight.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/submit.js" type="text/javascript">/* */</script>
<title>Creating, Using and Managing Tools</title>
</head>

<body onload="highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1><a name="Top"></a>Creating, Using and Managing Tools</h1>
		</td>
	</tr>
	<tr>
		<td class="use">Use Case</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table class="abstract">
	<tr>
		<td>
		<h2>Abstract</h2>
		<p>This article discusses the CAAMfgToolManagement use case and explains 
		how to create and manage tool, tool assembly and the user representation.</p>
		<ul>
			<li><a href="#Learn">What You Will Learn With This Use Case</a></li>
			<li><a href="#UseCase">The CAAMfgToolManagement Use Case</a>
				<ul>
					<li><a href="#What">What Does CAAMfgToolManagement Do</a></li>
					<li><a href="#How">How to Launch CAAMfgToolManagement</a></li>
					<li><a href="#Where">Where to Find the CAAMfgToolManagement 
						Code</a></li>
				</ul>
			</li>
			<li><a href="#Step">Step-by-Step</a></li>
			<li><a href="#InShort">In Short</a></li>
			<li><a href="#References">References</a></li>
		</ul>
		</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Learn"></a>What You Will Learn With This Use Case</h2>
<p>This use case is intended to help you to create and manage tool, tool assembly 
and user representation. This involves the following:</p>
<ul>
	<li>Create a mill or lathe tool.</li>
	<li>Create a tool holder.</li>
	<li>Create a tool assembly.</li>
	<li>Generate default user representation.</li>
	<li>Assign a new user representation.</li>
</ul>
<p>Before use this Use Case, you should known the data model:</p>
<p><strong>Mill and Drill Tool:</strong></p>
<p>
<img alt="Mill and Drill Tool" src="images/CAAMfgToolManagementSchemaMillAndDrillTool.png"/></p>
<p>Tool (interface DELIMfgTool) contains one or more user representation.</p>
<p><strong>Lathe Tool:</strong></p>
<p><img alt="Lathe Tool" src="images/CAAMfgToolManagementSchemaLatheTool.png"/></p>
<p>Sub Assembly (interface DELIMfgSubAssembly &amp; DELIMfgTool) contains inserts 
and shanks. Each insert and shank contain one or more user representation.</p>
<p><strong>Tool Assembly</strong></p>
<p>
<img alt="Tool Assembly" src="images/CAAMfgToolManagementSchemaToolAssembly.png"/></p>
<p>Tool Assembly (DELIMfgToolAssembly interface) can contain several tool holder 
and tool or sub assembly.</p>
<p>With DELIMfgMountPoint interface, we define on each resource the base point and 
the mount point (axis system). These axis are used to mount user representation. 
For example, in tool asembly, you have 2 tool holder and a tool. Base point of tool 
define the base of tool assembly. The mount point of last tool holder is mounting 
on machine. And all other, base point is mounting on mount point.</p>
<p>Each resource must have one user representation (default). After you can define 
a custom user representation with DELIMfgUserRepresentation interface.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="UseCase"></a>The CAAMfgToolManagement Use Case</h2>
<p>CAAMfgToolManagement is a use case of the CAAMachiningUse.edu framework that 
illustrates how to create a tool and tool assembly with the default user representation.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="What"></a>What Does CAAMfgToolManagement Do</h3>
<p>CAAMfgToolManagement create three commands to:</p>
<ul>
	<li>Create a drill tool and its user representation.</li>
	<li>Create a tool holder and its user representation.</li>
	<li>Create a tool assembly and add a tool and holder.</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="How"></a>How to Launch CAAMfgToolManagement</h3>
<p>To launch CAAMfgToolManagement, you will need to set up the build time environment, 
then compile CAAMfgToolManagement.m along with its prerequisites, set up the run 
time environment, and then execute the use case [<a href="#References">1</a>].</p>
<p>Then, you have also to build the CAAMaiCreateUserActivityCommand.m module that 
provides the command that creates an UserActivity feature.</p>
<p>Don't forget to edit the interface dictionary CAAMachiningUse.edu.dico located 
in:</p>
<p><code>InstallRootFolder\CAADoc\CAAMachiningUse.edu\CNext\code\dictionary\</code></p>
<p>where <code>InstallRootFolder</code> is the folder where the API CD-ROM is installed, 
and uncomment the appropriate lines by removing the '#CAA#' characters:</p>
<pre class="code">
# Decomment this line to run CAAMfgToolManagement Sample (remove #CAA# keyword)
#CAA#CAAMfgToolManagementWbAddin		DELIManufacturingProgramAddin		libCAAMfgToolManagement</pre>
<p>Launch a V6 session and enter the Machining workbench.</p>
<p>Use Case add a new tool bar &quot;CAA Tool Management&quot;:</p>
<p>
<img alt="Toolbar CAA Tool Management" src="images/CAAMfgToolManagementToolBar.png"/>
</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Where"></a>Where to Find the CAAMfgToolManagement Code</h3>
<p>The CAAMfgToolManagement use case is made of several classes/a single file located 
in the CAAMfgToolManagement.m module of the CAAMachiningUse.edu framework: <code>
InstallRootFolder\CAADoc\CAAMachiningUse.edu\CAAMfgToolManagement.m</code></p>
<p>where <code>InstallRootFolder</code> [<a href="#References">1</a>] is the folder 
where the API CD-ROM is installed.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Step"></a>Step-by-Step</h2>
<p>There are four logical steps in CAAMfgToolManagement:</p>
<ol>
	<li><a href="#Step1">Retrieving the Resource Factory</a></li>
	<li><a href="#Step2">Creating a Resource</a></li>
	<li><a href="#Step3">Computing Default User Representation</a></li>
	<li><a href="#Step4">Assigning a New User Representation</a></li>
</ol>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step1"></a>Retrieving the Resource Factory</h3>
<pre class="code">...
DELIMfgResourceFactory * pResourceFactory = NULL;  
HRESULT result = CATInstantiateComponent(&quot;CATMfgVirtualResourceCont&quot;, DELIMfgResourceFactory::ClassId(), (void**)&amp; pResourceFactory);
...</pre>
<p>Instantiate the resource factory. It allow us to create a new resource by call 
CreateResource method</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step2"></a>Creating a Resource</h3>
<pre class="code">...
result = spResourceFactory-&gt;CreateResource(type, ospResource);
...</pre>
<p>Call CreateResource to create a new type resource. This method return in ospResource 
the instance of new resource.</p>
<table class="fill">
	<tr>
		<td>MfgDrillTool</td>
		<td>Drill Tool</td>
	</tr>
	<tr>
		<td>MfgToolHolder</td>
		<td>Tool Holder</td>
	</tr>
	<tr>
		<td>MfgMillAndDrillToolAssembly</td>
		<td>Mill and Drill Tool Assembly</td>
	</tr>
	<tr>
		<td>...</td>
		<td>...</td>
	</tr>
</table>
<p>See constant include file: DELMfgToolConstant.h and DELMfgToolAssemblyConstant.h</p>
<p>When you create a tool assembly, component (tool, tool holder) should be add 
in tool assembly:</p>
<pre class="code">...
DELIMfgToolAssembly_var spToolAssembly(spMillAndDrillToolAssembly);
if(spToolAssembly != NULL_var)
{
   CATBaseUnknown_var spInstance;
   spToolAssembly-&gt;AddComponent(spDrillTool, spInstance);
   spToolAssembly-&gt;AddComponent(spToolHolder, spInstance);
}   
...</pre>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step3"></a>Computing Default User Representation</h3>
<pre class="code">...
DELIMfgUserRepresentation_var spUserRepresentation(ospResource);
if(spUserRepresentation != NULL_var)
	return spUserRepresentation-&gt;ComputeStandardRepresentation();
...</pre>
<p>After create a new resource, you must compute default user representation.</p>
<pre>...
DELIMfgUserRepresentation_var spUserRepresentation(spToolAssembly);
if(spUserRepresentation != NULL_var)
    spUserRepresentation-&gt;UpdatePosition();        
...</pre>
<p>In case of modification of tool assembly or sub assembly (if you add tool or 
insert, for example), you can update only position of user representation.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step4"></a>Assigning a New User Representation</h3>
<pre class="code">...
spUserRepresentation-&gt;AddRepresentation(&quot;Cut&quot;, &quot;Rotary&quot;, sp3DPartToolRepresentation);
...</pre>
<p>On each tool, tool holder, insert, ... you can add your own user representation. 
Each representation is defined by its cutting type (Cut, NoCut and Cleaner).</p>
<pre class="code">...
DELIMfgMountPoint_var spMountPoint(ospResource);
if(spMountPoint != NULL_var)
{
    spMountPoint-&gt;SetBasePoint(spAxisSystem, spFatherProduct); 
    spMountPoint-&gt;SetMachineMountPoint(spAxisSystem, spFatherProduct); 
}
...</pre>
<p>To mount correctly a tool assembly, on each user representation a base and mount 
axis should be defined and then link them to resource with interface DELIMfgMountPoint</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="InShort"></a>In Short</h2>
<p>This article provides an example on how to manage tool and tool assembly.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="References"></a>References</h2>
<table class="reference">
	<tr>
		<td>[1]</td>
		<td>
		<a href="../CAADocUseCases/CAADocRunSample.htm">
		Building and Launching a Use Case</a></td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [Mar 2010]</td>
		<td>Document created</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>

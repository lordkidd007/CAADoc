<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
<link href="../CAADocStyleSheets/caav5.css" rel="stylesheet" type="text/css"/>
<script src="../CAADocJavaScript/DSDocTocToc.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/DSDocHighlight.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/submit.js" type="text/javascript">/* */</script>
<title>Center Tree Nodes</title>
</head>

<body onload="highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1><a name="Top"></a>Center Tree Nodes</h1>
		</td>
	</tr>
	<tr>
		<td class="use">Use Case</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table class="abstract">
	<tr>
		<td>
		<h2>Abstract</h2>
		<p>This article shows how to center nodes of the tree. </p>
		<ul>
			<li><a href="#Learn">What You Will Learn With This Use Case</a> </li>
			<li><a href="#UseCase">The CAACafCenterGraph Use Case</a>
				<ul>
					<li><a href="#What">What Does CAACafCenterGraph Do</a> </li>
					<li><a href="#How">How to Launch CAACafCenterGraph</a> </li>
					<li><a href="#Where">Where to Find the CAACafCenterGraph Code</a></li>
				</ul>
			</li>
			<li><a href="#Step">Step-by-Step</a> </li>
			<li><a href="#InShort">In Short</a> </li>
			<li><a href="#References">References</a></li>
		</ul>
		</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Learn"></a>What You Will Learn With This Use Case</h2>
<p>This use case is intended to show you how to use the <code>CATCafCenterGraph</code> class 
that is used to center the node of a tree. </p>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="UseCase"></a>The CAACafCenterGraph Use Case</h2>
<p>CAACafCenterGraph is a use case of the CAACATIAApplicationFrame.edu framework 
that illustrates CATIAApplicationFrame framework capabilities.</p>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="What"></a>What Does CAACafCenterGraph Do</h3>

<p>The CAACafCenterGraph use case is a state command [<a href="#References">1</a>] 
integrated in the fixed area of the action bar thanks to the &quot;general add-in&quot; use case [<a href="#References">2</a>]. </p>

<table>
	<caption style="width: 305px"><a name="Fig.1"></a>Fig.1: The Center Graph Demonstrator Command</caption>
	<tr>
		<td>
		<img alt="" src="images/CAACafCenterGraph.png" width="304" height="117"/><br />
		</td>
	</tr>
</table>


<p>CAACafCenterGraph contains a command that illustrates usage of the <code>CATCafCenterGraph</code> 
class. Once launched, the command waits for a selection in the geometry, then makes 
use of the <code>CATCafCenterGraph</code> class to find and center the node associated to the 
selection in the geometry. The process can be repeated as long as the command is 
active.</p>
<table>
	<caption style="width: 502px"><a name="Fig.2">Fig.2</a>: In this example &quot;Pad.1&quot; is centered 
	in the window as a result of pad selection</caption>
	<tr>
		<td>
		<img alt="" src="images/CAACafCenterGraph.jpg" width="435" height="349"/></td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="How"></a>How to Launch CAACafCenterGraph</h3>
<p>To launch CAACafCenterGraph, you will need to set up the build time environment, 
then compile CAACafCenterGraph along with its prerequisites, set up the run time 
environment, and then execute the use case [<a href="#References">4</a>]. </p>
<p>But just before launching the execution, edit the CAAApplicationFrame.edu.dico 
interface dictionary file located in the dictionary directory of the CAAApplicationFrame.edu 
framework:</p>
<p><code>InstallRootFolder\CAADoc\CAAApplicationFrame.edu\CNext\code\dictionary\</code></p>
<p>where <code>InstallRootFolder</code> [<a href="#References">3</a>] is the directory 
where the API CD-ROM is installed.</p>
<p>In this file, remove the &quot;<strong>#</strong>&quot; character before the 
two following lines, and then run mkCreateRuntimeView.</p>
<pre class="code">...
#CAAAfrGeneralWksAddin          CATIWorkbenchAddin              libCAAAfrGeneralWksAddin
#CAAAfrGeneralWksAddin          CATIAfrGeneralWksAddin          libCAAAfrGeneralWksAddin
...</pre>
<p>The two lines deal with the add-in described in the CAAAfrGeneralWksAddin 
use case [<a href="#References">3</a>] located in the CAAAfrGeneralWksAddin.m module 
(CAAApplicationFrame.edu framework)</p>
<p>Then, in the window where you run the mkrun command, do not type the module 
name on the command line, but type 3DEXPERIENCE instead. When the application is ready, do the 
following:</p>
<ol>
    <li>Click <kbd>3D</kbd>, the west quadrant of the compass.</li>
	<li>In the <kbd>3D Modeling apps</kbd> section, 
		click  <kbd>Part Design</kbd> app.	</li>
	<li>Create <kbd>Point, Line, Pad,</kbd> etc.</li>
	<li>In the fixed area of the action bar, click <kbd>Center Graph Demonstrator</kbd></li>
	<li>Select objects in 3D, see the effect in the tree.</li>
</ol>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Where"></a>Where to Find the CAACafCenterGraph Code</h3>
<p>The CAACafCenterGraph use case is made of two classes:</p>
<ul>
	<li><em><strong>CAACafCenterGraphCmd</strong></em> class located in the</li>
	<li>.m 
		module of the CAACATIAApplicationFrm.edu framework:
		<p>This <em>CATStateCommand</em> class enables the end user to expand and 
		center nodes of the tree. The header file (.h) and the source 
		file (.cpp) are located in the LocalInterfaces and src directories respectively. 
		The source file is amply commented in this article.</p>
		<p><code>InstallRootDirectory\CAADoc\CAACATIAApplicationFrm.edu\CAACafCenterGraph.m\</code></p>
		<p>where <code>InstallRootDirectory</code> [<a href="#References">3</a>] 
		is the directory where the API CD-ROM is installed.</p>
	</li>
	<li><em><strong>CAAAfrGeneralWksAdn </strong></em>class located in the CAAAfrGeneralWksAddin.m 
		module of the CAAApplicationFrame.edu framework
		<p>This class, not detailed there, defines a general add-in. 
		This add-in contains the Center Graph Demonstrator command. Refer to the 
		Where to Find the CAAAfrGeneralWksAddin Code section of the CAAAfrGeneralWksAddin 
		[<a href="#References">3</a>] use case for details.</p>
	</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Step"></a>Step-by-Step</h2>
<p>There are two logical steps in CAACafCenterGraph :</p>
<ol>
	<li><a href="#Step1">Implementing the BuildGraph Method</a> </li>
	<li><a href="#Step2">Centering the Graph on the Selected Object</a></li>
</ol>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step1"></a>Implementing the BuildGraph 
Method</h3>
<p>As usual the <code>BuildGraph</code> method is divided in three parts:</p>
<ol>
	<li>Creating the agents </li>
	<li>Creating the states </li>
	<li>Creating the transitions between states according to the agents.</li>
</ol>
<pre class="code">...
   _daObjectToCenterNode = new CATPathElementAgent(&quot;SelObjectToCenterNodeId&quot;);
   _daObjectToCenterNode-&gt;AddElementType(IID_CATINavigateObject);
   _daObjectToCenterNode-&gt;SetBehavior(CATDlgEngRepeat | CATDlgEngNewHSOManager | CATDlgEngWithPSOHSO );

   CATDialogState *stGetObjState = GetInitialState(&quot;stGetObjStateId&quot;);
   stGetObjState-&gt;AddDialogAgent(_daObjectToCenterNode);

   CATDialogTransition *pTransition = AddTransition
   (
       stGetObjState,
       stGetObjState,
       IsLastModifiedAgentCondition(_daObjectToCenterNode) , 
       Action((ActionMethod) &amp; CAACafCenterGraphCmd::CenterGraphOnObject)
   ); 

...</pre>
<p><code>_daObjectToCenterNode</code> is an acquisition agent to select an object 
in the tree or in 3D. After the selection, the object is highlighted 
(specify by the <code>CATDlgEngWithPSOHSO</code> behavior). The <code>CATDlgEngRepeat</code> 
behavior enables you to re-use the agent without reinitializing it. The <code>CATDlgEngNewHSOManager</code> 
empties the HSO before each selection.</p>
<p>This state command has only one state, <code>stGetObjState</code> , whose name 
is <code>stGetObjStateId</code>. </p>
<p>When the end user selects a valid element, the unique transition is triggered 
and the <code>CenterGraphOnObject</code> method is called. </p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step2"></a>Centering the Graph on the Selected Object</h3>
<p>The first part of the <code>CenterGraphOnObject</code> method consists in retrieving 
the <code>CATNavigBox</code> instance corresponding to the tree you want to 
center. </p>
<pre class="code">...
// Retrieves the current window 
CATFrmLayout * pLayout = CATFrmLayout::GetCurrentLayout();
if ( NULL == pLayout ) return TRUE;

CATFrmWindow * pCurrentWindow = pLayout-&gt;GetCurrentWindow();
if ( NULL == pCurrentWindow ) return TRUE;

// If it is a CATFrmNavigGraphicWindow, it is possible to
// retrieve a CATNavigBox pointer
//
if ( 1 != pCurrentWindow-&gt;IsAKindOf(&quot;CATFrmNavigGraphicWindow&quot;) ) return TRUE;

CATFrmNavigGraphicWindow * pFrmNavigGraphicWindow = 
(CATFrmNavigGraphicWindow*) pCurrentWindow ;

CATNavigBox * pNavigBox = NULL ;
pNavigBox = pFrmNavigGraphicWindow-&gt;GetNavigBox();

...</pre>
<p>Then the actual job is done by instanciating a <code>CATCafCenterGraph</code> 
class and calling the CenterGraph method on it.</p>
<pre class="code">...
CATCafCenterGraph CenterGraphObj;
CenterGraphObj.CenterGraph(&quot;OnHSO&quot;,pNavigBox);
...</pre>
<p>The first argument is &quot;OnHSO&quot; because we want to center the tree on 
the highlighted object. The second argument is the pointer to the <code>CATNavigBox</code> 
instance that was retrieved in the first part of the method.</p>
<p>For information, please note that actual code run by the &quot;CenterGraph&quot; 
method is the same as the one run by the interactive command &quot;Center Graph&quot; 
that can be found in object contextual menu.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="InShort"></a>In Short</h2>
<p>This use case explains how to find and center an element of the tree in the window.</p>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="References"></a>References</h2>
<table class="reference">
	<tr>
		<td>[1]</td>
		<td>
		<a href="../CAADegDialogEngine/CAADegTaGettingStarted.htm">Getting 
		Started with State Dialog Commands</a></td>
	</tr>
	<tr>
		<td>[2]</td>
		<td><a href="CAAAfrUcSampleGeneralWksAddin.htm">Making Your Model Independent 
		Command Available in All Apps</a></td>
	</tr>
	<tr>
		<td>[3]</td>
		<td>
		<a href="../CAADocUseCases/CAADocRunSample.htm">
		Building and Launching a Use Case</a></td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [March 2006]</td>
		<td>Document created</td>
	</tr>
	<tr>
		<td>Version: <strong>2</strong> [Jul 2014]</td>
		<td>3DEXPERIENCE migration</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>

<html xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 12.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
<title>Designer Central 3D Position</title>
 <script language="JavaScript" src="../CAADocJavaScript/submit.js"></script>

</head>

<body>
<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1>X-CAD 3D Position</h1>
		</td>
	</tr>
	<tr>
		<td class="use">Technical Article&nbsp;</td>
	</tr>
</table>
<!---------------------------------comment------------------------------------->

<table class="abstract">
  <tr>
    <td >
      <h2><a name="Top"></a>Abstract</h2>
      <p>This Technical article mainly overviews about 3D position inside the 
		X-CAD along with schema settings. In addition article discuss about XML 
		protocol and attribute for 3dpotion inside request and response.<ul>
		<li><a href="#Relationship Attribute Support">How 3D Position is stored 
		in X-CAD 
		</a></li>
		<li><a href="#Relationship Attribute Support">Relationship Attribute Support 
		</a> </li>
		<li><a href="#XML Example">XML protocol example</a> </li>
		<li><a href="#In short">In Short</a></li>
		<li><a href="#References">References</a></li>
		</ul>
	</td>
  </tr>
  
  </table>

<!---------------------------------comment------------------------------------->

<h2><a name="Bus Type"></a><a name="3D position"></a>How 3D Position is stored 
in X-CAD </h2>
 <p> 3D Position is stored on "CAD SubComponent&quot; relationship, and it is 
	represented in matrix format as shown below</p>
<ul> 
 <li> "Spatial Location" String attribute</li>
	<li> XYZ coordinates in millimeters</li>
	<li> Scientific and decimal notation accepted</li>
 <li> Separator between coefficients: &quot;,&quot; </li>
 <li> Decimal separator: "." </li>
	<li> Maximum number of decimal : It is recommend to entre numbers with 
	<strong>15 significant digits</strong> minimum to guaranty accurate positioning of large assemblies (rk 0 digit on right after decimal separator can be omitted  .
	<ul>
		<li>Ex :  one third  should be entered as 0.333333333333333 </li>
		<li>One half can be entered as 0.5 &#8220; </li>
	</ul>
</li>
	<li> Isometric condition (absolute value of the matrix determinant must be 
	equal to one)</li>
</ul>
<p>Matrix A</p>
     <!-- matrix expression begin -->
                        <table style="color:#000">
                                    <tr>
                                                <td>
                                                            <table border="0" cellpadding="0" cellspacing="0px" style="border-left:1px solid #000; border-right:1px solid #000; color:#000">
                                                                        <tr>
                                                                                    <td style ="border-top:1px solid #000; border-bottom:1px solid #000;">
                                                                                                &#xA0;
                                                                                    </td>
                                                                                    <td>
                                                                                                <table border="0" cellpadding="0" cellspacing="0" style="color:#000;">
                                                                                                            <tr>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>xx</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>xy</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>xz</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>xt</sub></td>
                                                                                                            </tr>
                                                                                                            <tr>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>yx</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>yy</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>yz</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>yt</sub></td>
                                                                                                            </tr>
                                                                                                            <tr>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>zx</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>zy</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>zz</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>zt</sub></td>
                                                                                                            </tr>
                                                                                                            <tr>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>tx</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>ty</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>tz</sub></td>
                                                                                                                        <td align="center" valign="center" width="30">u<sub>tt</sub></td>
                                                                                                            </tr>
                                                                                                </table>
                                                                                    </td>
                                                                                    <td style ="border-top:1px solid #000; border-bottom:1px solid #000;">
                                                                                                &#xA0;
                                                                                    </td>
                                                                        </tr>
                                                            </table>
                                                </td>
                                    </tr>
                        </table>
                        <!-- matrix expression end -->
                        <p>&nbsp;|<span style="font-size:8.0pt;font-family:&quot;Verdana&quot;,&quot;sans-serif&quot;;
mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;mso-bidi-font-family:
&quot;Times New Roman&quot;;color:black;mso-ansi-language:EN-US;mso-fareast-language:
EN-US;mso-bidi-language:AR-SA">(uxx.uyy.uzz + uxy.uyz.uzx+ uxz.uyx.uzy) - (uxz.uyy.uzx 
						+uxy.uyx.uzz + uxx.uyz.uzy)| = 1</span>&nbsp;&nbsp; =&gt; Isometric matrix</p>
                        <!-- matrix expression end -->

<script type="text/javascript">insertLinkToTop();</script>
<h2><a name="Bus Type"></a><a name="Relationship Attribute Support"></a>Relationship Attribute Support  </h2>
<p>Transformation is the only supported relationship attribute used for mapping the relationship attributes between the CAD Tool and 
3DEXPERIENCE Platform. </p>
<p>The following attributes are used for mapping the relationship attributes between the CAD Tool and 
3DEXPERIENCE Platform. </p>
<p><strong>MCADInteg-CADToMxRelAttribMapping</strong> : (multiline string)
</p>
<p>This is for CAD to 3DEXPERIENCE Platform relationship attribute mapping. Use this mapping for attribute synchronization during checkin. The syntax of the attribute is:
CAD-Relationship-Type,CAD-Relationship-Attribute|Matrix-
Relationship-Type,Matrix-Relationship-Attribute
</p>
<p>Map the attribute relativeXform from CAD Relationship CADSubcomponent to 
3DEXPERIENCE Platform Relationship CAD Subcomponent's attribute Spatial Location.

</p>
<p><strong>MCADInteg-MxToCADRelAttribMapping:</strong> (multiline string)</p>
<p>This is for 3DEXPERIENCE Platform to CAD relationship attribute mapping. Use this attribute for synchronization during checkout. 
</p>
<p>The syntax of the attribute is:
Matrix-Relationship-Type, 
Matrix-Relationship-Attribute|CAD-Relationship-Type, 
CAD-Relationship-Attribute
</p>
<p >Map the attribute Spatial 
Location on the CAD SubComponent relationship to the CADApp relationship 
CADSubcomponent and its attribute <strong>relativeXform</strong></p>
<p><strong>relativeXform</strong> is a special name 
of the CAD attribute, which represents the relative transformation of a 
component with respect to its immediate parent assembly. Do not change this name 
because it is used by 3DEXPERIENCE Platform X-CAD. The mapped 3DEXPERIENCE 
Platform attribute can 
be any attribute in Database, defined on the relationship CAD SubComponent. This 
is true for relationship attributes from the CAD side, in the above relationship 
attribute mappings from and to 3DEXPERIENCE Platform.</p>
<p>If the <strong>
MCADInteg-CopyRelAttribOnChekin </strong>and <strong>
MCADInteg-CopyRelAttribOnCheckout </strong>settings in the Local Configuration 
Object are set to TRUE, they transfer these relationship attributes to and from 
3DEXPERIENCE Platform respectively.</p>
<h3> 
Some parameters in GCO/LCO have to be valuated
(Prerequisites to expose 3D Position in X-CAD )</h3>
<p> 
Attribute :<strong>IEF-Pref-MCADInteg-CopyRelAttribOnCheckin</strong> = TRUE
<br>Function :<strong>To enable copy of Relationship attributes at check-in&nbsp;
</strong> </p>
<p> 
Attribute : <strong>MCADInteg-CADToMxRelAttribMapping
<br>
</strong>Function :  <strong>Should contain for position exposition
<br>
</strong>
Example :<strong> assemblyComponent,relativeXform|CAD SubComponent,Spatial Location </strong>
<br>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<strong>CADSubcomponent,relativeXform|CAD SubComponent,Spatial Location </strong> 
</p>
<p> 
Attribute :<strong> MCADInteg-ExpandedSubComponent</strong> = TRUE
<br> 
Function : <strong>To get one CAD SubComponent relationship per Instance
<br>

</strong>
Example<strong>:
CAD SubComponent,Spatial Location|CADSubcomponent,relativeXform

</strong>
</p>
<script type="text/javascript">insertLinkToTop();</script>
<h2><a name="XML Example"></a>XML protocol example </h2>
<p>As we discussed above, after setting schema configuring user could use
          <strong>relativeXform </strong>
attribute to send and receive 3D position of CAD component. 3D position of CAD 
component we need to feed in while <strong>checkinEx request</strong> and we 
will get back this 3D position with the <strong>checkoutEx response</strong>. 
Sample examples described below.&nbsp;&nbsp;&nbsp;&nbsp;
</p>
<table>
	<tr>
		<td>
		<img src="images/CAADECTaDEC_Schema_image6.jpg" width="847" height="425"></td>
	</tr>
</table>
<p>Example of <strong><em>CheckinEx</em></strong> command for CAA as below for 
above matrix shown in image. <pre>&lt;?xml version=&quot;1.0&quot; ?&gt; 
   &lt;command cse=&quot;CAA&quot; ver=&quot;R216&quot; cname=&quot;checkinEx&quot; csever=&quot;R216&quot; createversion=&quot;true&quot; overwriteobject=&quot;false&quot;&gt;
   &lt;relationshiplist&gt;
      &lt;relationship rid=&quot;13&quot; mxid=&quot;&quot; topnode=&quot;dpt&quot; structureview=&quot;none&quot; cadrelationship=&quot;assemblyComponent&quot; mustinstructure=&quot;true&quot;&gt;
        &lt;attribute&gt;
          <strong>&lt;name&gt;relativeXform&lt;/name&gt; 
          &lt;value&gt;1,0,0,0,0,0.707106781186548,0.707106781186547,0,0,-0.707106781186547,0.707106781186548,0,10,20,30.5,1&lt;/value&gt; </strong>
        &lt;/attribute&gt;
...</pre>

<p>Example of <strong><em>CheckoutEx</em></strong> response command</p>
<pre>...
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt; 
  &lt;response checkoutEx=&quot;false&quot; cname=&quot;checkoutEx&quot; cse=&quot;CAA&quot; csever=&quot;R216&quot; result=&quot;success&quot; ver=&quot;R216&quot;&gt;
    &lt;info&gt;
       &lt;relationshiplist&gt;
           &lt;relationship cadrelationship=&quot;assemblyComponent&quot; modificationstatus=&quot;&quot; reluuid=&quot;LIDV5:Instance:c0be2943_198b0_504f0066_29d&quot; rid=&quot;0&quot; topnode=&quot;dpt&quot;&gt;
...
           <strong>&lt;attribute type=&quot;string&quot;&gt;
             &lt;name&gt;</strong><strong>relativeXform&lt;/name&gt; 
             &lt;value&gt;
               &lt;![CDATA[ 1,0,0,0,0,0.707106781186548,0.707106781186547,0,0,-0.707106781186547,0.707106781186548,0,10,20,30.5,1]]&gt; 
             &lt;/value&gt;
           &lt;/attribute&gt;</strong>
...</pre>

<script type="text/javascript">insertLinkToTop();</script>
<h2><a name="In short"></a>In Short</h2><p>The article has detailed the 
3dposition inside the X-CAD and schema 
configuration along with XML protocol example. </p>
<script type="text/javascript">insertLinkToTop();</script>

<h2><a name="References"></a>References    </h2>
 <table>
     <tr>
    
       <td >[1]</td>
       <td >&nbsp;</td>
     </tr>  
   </table>
   
<!---------------------------------comment------------------------------------->
<h2><a name="History"></a>History </h2> <table><tr>
    <td valign="top"><strong>Version</strong>: [Jan 2013]</td>
    <td valign="top">Document created</tr>
  <tr>
<script type="text/javascript">insertLinkToTop();</script>
  </tr>
</table>

<!---------------------------------comment------------------------------------->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>



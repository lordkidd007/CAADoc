<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
<link href="../CAADocStyleSheets/caav5.css" rel="stylesheet" type="text/css"/>
<script src="../CAADocJavaScript/DSDocTocToc.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/DSDocHighlight.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/submit.js" type="text/javascript">/* */</script>
<title>Creating a Scope Link between Resource and System References</title>
</head>

<body onload="highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1><a name="Top"></a>Creating a Scope Link between Resource and System 
		References</h1>
		</td>
	</tr>
	<tr>
		<td class="use">Use Case</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table class="abstract">
	<tr>
		<td>
		<h2>Abstract</h2>
		<p>This article describes an example of use of Framework DELPPRResourceItf</p>
		<p>This usecase shows how to insert a scope link between a system reference 
		and a resource reference; how to navigate along references linked by this 
		relationship and removing the links.</p>
		<ul>
			<li><a href="#Learn">What You Will Learn With This Use Case</a></li>
			<li><a href="#UseCase">The CAARmiScopeLink Use Case</a>
				<ul>
					<li><a href="#What">What Does CAARmiScopeLink Do</a></li>
					<li><a href="#How">How to Launch CAARmiScopeLink</a></li>
					<li><a href="#Where">Where to Find the CAARmiScopeLink Code</a>
					</li>
				</ul>
			</li>
			<li><a href="#Step">Step-by-Step</a></li>
			<li><a href="#InShort">In Short</a></li>
			<li><a href="#References">References</a></li>
		</ul>
		</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Learn"></a>What You Will Learn With This Use Case</h2>
<p>In this use case, you will learn how to use the DELIPPRResourceAuth and DELIPPRResourceNav 
interfaces in order to:</p>
<ul>
	<li>Create a Scope Link from a system reference to a resource reference.</li>
	<li>Navigate on Scope relations from resource to system or from system to resource.</li>
	<li>Remove the scope created.</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="UseCase"></a>The CAARmiScopeLink Use Case</h2>
<p>CAARmiScopeLink is a use case of the CAAPPRResourceItf.edu framework that illustrates 
DELPPRResourceItf framework capabilities.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="What"></a>What Does CAARmiScopeLink Do</h3>
<ul>
	<li>Query root system and resource references.</li>
	<li>Inserts them into the Bag.</li>
	<li>Creates a Scope link between both.</li>
	<li>Navigates from resource to system and from system to resource References 
		following this assignated relationship.</li>
	<li>Removes the Scope link created beween the system/resource references.</li>
</ul>
<p><strong>Usecase Objects</strong>: <code>CAARmiScopeLink</code></p>
<p><strong>Expected Result</strong>:<br />
The result is a return code, its value is:</p>
<ul>
	<li>0 on successful completion.</li>
	<li>1 if execution failed.</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="How"></a>How to Launch CAARmiScopeLink</h3>
<p>To launch CAARmiScopeLink, you will need to set up the build time environment, 
then compile CAARmiScopeLink along with its prerequisites, set up the run time environment, 
and then execute the use case [<a href="#References">1</a>].</p>
<p>Additional instructions:</p>
<p>This use case is using datas created by another use case[<a href="#References">2</a>], 
that you should run first.</p>
<p><code>mkrun -c "CAARmiScopeLink Repository Server User Password SecurityCtx Environment"</code></p>
<p>where:</p>
<!--
          <pre>
        Repository    : The name of the repository (or provider)
                    Server        : The name and port of the server
                    User          : The user identifier
                    Password      : The user password
                    SecurityCtx   : A string representing the security context (Role.Organization.Project)
                    Environment   : A PLM Environment containing a modeler customization
          </pre>
-->
<table class="fill">
	<!--
          <tr>
          <th>Repository :</th>
            <th style="width:20px"> </th>
            <th>The name of the repository (or provider)</th>
          
            <th class="style2">Repository :</th>
            <th style="width:20px"> </th>
            <th class="style3">The name of the repository (or provider)</th>
           
          </tr>
          -->
	<tr>
		<th>Parameter</th>
		<th>description</th>
	</tr>
	<tr>
		<td>Repository</td>
		<td>The name of the repository (or provider)</td>
	</tr>
	<tr>
		<td>Server</td>
		<td>The name and port of the server</td>
	</tr>
	<tr>
		<td>User</td>
		<td>The user identifier</td>
	</tr>
	<tr>
		<td>Password</td>
		<td>The user password</td>
	</tr>
	<tr>
		<td>SecurityCtx</td>
		<td>A string representing the security context (Role.Organization.Project)</td>
	</tr>
	<tr>
		<td>Environment</td>
		<td>A PLM Environment containing a modeler customization</td>
	</tr>
</table>
<p><strong>Example:</strong> <code>mkrun -c "CAARmiScopeLink PLM1 ve4al10dsy:8090 
uxodtipt Ovb2pcds VPMADMIN.ADMIN.DEFAULT VPM"</code></p>
<table>
	<caption>Fig. 1: Model Structure Created in this Use Case</caption>
	<tr>
		<td>
		<img alt="Model Structure" src="images/CAARmiScopeLink_Structure.png" style="width: 700px"/>
		</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Where"></a>Where to Find the CAARmiScopeLink Code.</h3>
<p>The CAARmiScopeLink use case is made of a file located in the CAARmiScopeLink.m 
module of the CAAPPRResourceItf.edu framework:</p>
<p><code>InstallRootFolder\CAADoc\CAAPPRResourceItf.edu\CAARmiScopeLink.m</code></p>
<p>where <code>InstallRootFolder</code> [<a href="#References">1</a>] is the folder 
where the API CD-ROM is installed.</p>
<p>Main files:</p>
<pre class="code">CAAPPRResourceItf.edu/CAARmiScopeLink.m/src/CAARmiScopeLink.cpp
CAAPPRResourceItf.edu/ProtectedInterfaces/CAARmiSessionServices.h
CAAPPRResourceItf.edu/ProtectedInterfaces/CAARmiFindServices.h
CAAPPRResourceItf.edu/ProtectedInterfaces/CAARmiReleaseServices.h
CAAPPRResourceItf.edu/CAARmiServices.m/src/CAARmiSessionServices.cpp
CAAPPRResourceItf.edu/CAARmiServices.m/src/CAARmiFindServices.cpp
CAAPPRResourceItf.edu/CAARmiServices.m/src/CAARmiReleaseServices.cpp
CAAPLMClientAdapter.edu/PublicInterfaces/CAAAdpCreateCloseSession.h</pre>
<p>CAA files:</p>
<pre class="code"><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'class', 'CATAdpDictionaryServices');return false;">/PublicInterfaces/CATAdpDictionaryServices.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'class', 'CATAdpQueryServices');return false;">/PublicInterfaces/CATAdpQueryServices.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'class', 'CATAdpOpenSaveServices');return false;">/PublicInterfaces/CATAdpOpenSaveServices.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'class', 'CATAdpIdentificationSet');return false;">/PublicInterfaces/CATAdpIdentificationSet.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIdentificationAccess');return false;">CATPLMIdentificationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIdentificationAccess', 'interface', 'CATIAdpType');return false;">/PublicInterfaces/CATIAdpType.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIdentificationAccess');return false;">CATPLMIdentificationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIdentificationAccess', 'interface', 'CATIAdpPLMIdentificator');return false;">/PublicInterfaces/CATIAdpPLMIdentificator.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'interface', 'CATIAdpEnvironment');return false;">/PublicInterfaces/CATIAdpEnvironment.h</a></pre>
<p>Documented Framework:</p>
<pre class="code"><a href="#" onclick="javascript:CAAlink('CPP', 'PLMSessionInterfaces');return false;">PLMSessionInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'PLMSessionInterfaces ', 'class', 'PLMPSISessionHelpers');return false;">/PublicInterfaces/PLMPSISessionHelpers.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRResourceItf');return false;">DELPPRResourceItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRResourceItf', 'interface', 'DELIPPRResourceAuthAccess');return false;">/PublicInterfaces/DELIPPRResourceAuthAccess.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRResourceItf');return false;">DELPPRResourceItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRResourceItf', 'interface', 'DELIPPRResourceAuth');return false;">/PublicInterfaces/DELIPPRResourceAuth.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRResourceItf');return false;">DELPPRResourceItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRResourceItf', 'interface', 'DELIPPRResourceNavAccess');return false;">/PublicInterfaces/DELIPPRResourceNavAccess.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRResourceItf');return false;">DELPPRResourceItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRResourceItf', 'interface', 'DELIPPRResourceNav');return false;">/PublicInterfaces/DELIPPRResourceNav.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'interface', 'CATIPLMNavReference');return false;">/PublicInterfaces/CATIPLMNavReference.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'class', 'CATListPtrCATIPLMNavReference');return false;">/PublicInterfaces/CATListPtrCATIPLMNavReference.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'ObjectModelerBase');return false;">ObjectModelerBase</a><a href="#" onclick="javascript:CAAlink('CPP', 'ObjectModelerBase', 'class', 'CATOmbLifeCycleRootsBag');return false;">/PublicInterfaces/CATOmbLifeCycleRootsBag.h</a></pre>
<!--
<p style="background-color: #F8FBFF;  border: 1px solid  #D2E6FE;padding:5px;">
<a href="#" onclick="javascript:CAAlink('CPP', 'SystemStructureInterfaces');return false;">SystemStructureInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'System', 'class', 'CATPrdGetOccurrenceMngt');return false;">/PublicInterfaces/CATPrdGetOccurrenceMngt.h</a><br />
<a href="#" onclick="javascript:CAAlink('CPP', 'SystemStructureInterfaces');return false;">SystemStructureInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'System', 'class', 'CATIPrdOccurrenceMngt');return false;">/PublicInterfaces/CATIPrdOccurrenceMngt.h</a></p>
-->
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Step"></a>Step-by-Step </h2>
<p>There are five logical steps in CAARmiScopeLink:</p>
<ul>
	<li><a href="#Step1">Retrieving the DELIPPRResourceAuth and DELIPPRResourceNav 
		Interfaces</a></li>
	<li><a href="#Step2">Querying Root Resource and Root System References in the 
		Database</a></li>
	<li><a href="#Step3">Creating the Resource/System Scope</a></li>
	<li><a href="#Step4">Navigating Scope Links between System and Resource References</a></li>
	<li><a href="#Step5">Removing the Resource/System Scope Links</a></li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step1"></a>Retrieving the DELIPPRResourceAuth and DELIPPRResourceNav 
Interfaces</h3>
<pre class="code">DELIPPRResourceAuth_var hPPRResourceAuth;
rc = ::GetPPRResourceAuth(hPPRResourceAuth);
            
DELIPPRResourceNav_var hPPRResourceNav;
rc = ::GetPPRResourceNav(hPPRResourceNav);</pre>
<p>The DELIPPRResourceAuth interface will later be used to create and remove scope 
link between system and resource and the DELIPPRResourceNav interface to navigate 
along it.</p>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step2"></a>Querying Root Resource and Root System References in the 
Database</h3>
<pre class="code">CATOmbLifeCycleRootsBag Bag;
CATAdpAttributeSet AttributeSetResource;
AttributeSetResource.AddAttribute("PLM_ExternalID","Organizational.1"); 
AttributeSetResource.AddAttribute("V_version","---"); 

CATIType_var spTypeResource;
rc = CATCkePLMNavPublicServices::RetrieveKnowledgeType("VPMReference",spTypeResource);

CATIPLMNavReference * piRootResource = NULL;
int ret = CAARmiFindServices::FindReference( piEnv, Bag, AttributeSetResource, spTypeResource, IID_CATIPLMNavReference, (void **)&amp;piRootResource);

CATAdpAttributeSet AttributeSetSystem;
AttributeSetSystem.AddAttribute("PLM_ExternalID","GeneralSystem.1"); 
AttributeSetSystem.AddAttribute("V_version","---"); 

CATIType_var spTypeSystem;
rc = CATCkePLMNavPublicServices::RetrieveKnowledgeType("DELLmiGeneralSystemReference",spTypeSystem);

CATIPLMNavReference * piRootSystem = NULL;
ret = CAARmiFindServices::FindReference( piEnv, Bag, AttributeSetSystem, spTypeSystem, IID_CATIPLMNavReference,(void **)&amp;piRootSystem);</pre>
<p>The DELIPPRResourceAuth interface will be later used to create relation between 
system and resource and to navigate along it.</p>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step3"></a>Creating the Resource/System Scope</h3>
<pre class="code">rc = hPPRResourceAuth-&gt;CreateScope(hNavRefOnRootresource, hNavRefOnRootsystem);</pre>
<p>The scope is created from 2 CATIPLMNavReference.</p>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step4"></a>Navigating Scope Links between System and Resource References</h3>
<pre class="code">CATListPtrCATIPLMNavReference listSystemReferences;
rc = hPPRResourceNav-&gt;GetSystemOfEachScope(hNavRefOnRootResource, listSystemReferences);
CATListPtrCATIPLMNavReference listResourceReferences;
rc = hPPRResourceNav-&gt;GetResourceOfEachScope(hNavRefOnRootSystem, listResourceReferences);</pre>
<p>Using the DELIPPRResourceNav interface, occurences are navigated in both direction, 
from the system to the resource and then in the other direction. As DELIPPRResourceNav 
scope-focussed methods signatures do suggest, scope may contains several system 
or resource references for a single reference.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Step5"></a>Removing the Resource/System Scope Links</h3>
<pre class="code">rc = hPPRResourceAuth-&gt;RemoveScope(hNavRefOnRootresource, hNavRefOnRootsystem);</pre>
<p>DELIPPRResourceAuth is used to remove the scope links between the two system 
and resource reference.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="InShort"></a>In Short</h2>
<p>Each system reference may be assigned to several resource references via Scope 
Links and navigating between them is made possible through the DELIPPRResourceNav 
Class. The scope links can be removed using the DELIPPRResourceAuth.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="References"></a>References</h2>
<table class="reference">
	<tr>
		<td>[1]</td>
		<td>
		<a href="../CAADocUseCases/CAADocRunSample.htm">
		Building and Launching a Use Case</a></td>
	</tr>
	<tr>
		<td>[2]</td>
		<td><a href="CAARmiUcCreateResource.htm">Creating a Resource Reference</a>
		</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [Jun 2009]</td>
		<td>Document created</td>
	</tr>
	<tr>
		<td>Version: <strong>2</strong> [Jun 2012]</td>
		<td>Updated with removal of scope between system and resource</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta http-equiv="Content-Language" content="en-us" />
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	<link rel="stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css"/>
	<script type="text/javascript" src="../CAADocJavaScript/DSDocTocToc.js">/* */</script>
	<script type="text/javascript" src="../CAADocJavaScript/DSDocHighlight.js">/* */</script>
	<script type="text/javascript" src="../CAADocJavaScript/submit.js">/* */</script>
	<title>Add Media</title>
</head>

<body onload="createToc();highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
			<h1><a name="Top"></a>Add Media</h1>
		</td>
	</tr>
</table>

<table class="abstract">
	<tr><td><div id="toc"></div></td></tr>
</table>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<h2><a name="Role"></a>Role</h2>
<p>Adds a media into an existing community. This service uploads a media file to 3DSwym servers. Therefore it uses special POST form. Returns the added media.</p>

<script type="text/javascript">insertLinkToTop();</script>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<h2><a name="Request"></a>Request</h2>

<table class="fill">
	<tr><th>&nbsp;Method&nbsp;</th><th>&nbsp;Path&nbsp;</th></tr>
	<tr>
		<td>POST</td>
		<td>api/media/add</td>
	</tr>
</table>

<h3><a name="Parameters"></a>Parameters</h3>
<p>The GET parameters (see <a href="CAA3DSwymTaAboutWS.htm#GET">GET Method</a>) are:</p>
<table class="fill">
	<tr>
		<th>&nbsp;Name&nbsp;</th>
		<th>&nbsp;Require&nbsp;</th>
		<th>&nbsp;Value&nbsp;</th>
		<th>&nbsp;Description&nbsp;</th>
	</tr>
	<tr>
		<td>include_documents</td>
		<td>yes</td>
		<td>true</td>
		<td>Fixed value</td>
	</tr>
</table>
<h3><a name="Post"></a>POST Body</h3>
<p>Adding a media require HTTP POST request for 3DSwym. Content-Type header must be set to "multipart/form-data; boundary=<em>[boundary]</em>" where <em>[boundary]</em> is a delimiter for parameters (see the example below). The POST parameters must be arranged as in the example below and not as a JSON.</p>
<table class="fill">
	<tr>
		<th>&nbsp;Name&nbsp;</th>
		<th>&nbsp;Require&nbsp;</th>
		<th>&nbsp;Value&nbsp;</th>
		<th>&nbsp;Description&nbsp;</th>
	</tr>
	<tr>
		<td>category_id</td>
		<td>no</td>
		<td>A positive number.</td>
		<td>Identifier (of existing available categories) of the category the media will be attached to.</td>
	</tr>
	<tr>
		<td>community_id</td>
		<td>yes</td>
		<td>A positive number.</td>
		<td>Identifier of the community where the media will be added.</td>
	</tr>
	<tr>
		<td>description</td>
		<td>no</td>
		<td>A string. Format is HTML-like (see <a href="CAA3DSwymTaAboutWS.htm#HTMLFormatting">Format HTML-like</a>).</td>
		<td>Description of the media to add.</td>
	</tr>
	<tr>
		<td>download_original_file</td>
		<td>no</td>
		<td>A boolean: <ul> <li>0: Original file cannot be downloaded.</li> <li>1: Original file can be downloaded.</li> </ul></td>
		<td>Accessibility of the media file.</td>
	</tr>
	<tr>
		<td>published</td>
		<td>yes</td>
		<td>A boolean: <ul> <li>0: draft.</li> <li>1: published.</li> </ul> </td>
		<td>Given visibility of the media for the community members.</td>
	</tr>
	<tr>
		<td>title</td>
		<td>yes</td>
		<td>A string.</td>
		<td>Title of the media to add.</td>
	</tr>
	<tr>
		<td>userFile & filename</td>
		<td>yes</td>
		<td>Binary data.</td>
		<td>Binary data of the file to upload. & File name.</td>
	</tr>
</table>

<script type="text/javascript">insertLinkToTop();</script>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<h2><a name="Response"></a>Response</h2>

<p>The response is a JSON composed as follows:</p>

<table class="fill">
	<tr>
		<th>&nbsp;Key&nbsp;</th>
		<th>&nbsp;Description&nbsp;</th>
		<th>&nbsp;Value&nbsp;</th>
		<th>&nbsp;Applicability&nbsp;</th>
	</tr>
	<tr>
		<td>monitoring</td>
		<td></td>
		<td></td>
		<td>no</td>
	</tr>
	<tr>
		<td>nb_result</td>
		<td></td>
		<td></td>
		<td>no</td>
	</tr>
	<tr>
		<td>request_id</td>
		<td></td>
		<td></td>
		<td>no</td>
	</tr>
	<tr>
		<td>result</td>
		<td>Information on the added media.</td>
		<td>
			<p>The value is a JSON composed as follows:</p>

			<table class="fill">
				<tr>
					<th>&nbsp;Key&nbsp;</th>
					<th>&nbsp;Description&nbsp;</th>
					<th>&nbsp;Value&nbsp;</th>
					<th>&nbsp;Applicability&nbsp;</th>
				</tr>
				<tr>
					<td><b>id</b></td>
					<td>Media identifier.</td>
					<td>
						A positive number.
					</td>
					<td>yes</td>
				</tr>
				<tr>
					<td>mediaUploaded</td>
					<td>Information on the uploaded media.</td>
					<td>
						<p>The value is a JSON composed as follows:</p>

						<table class="fill">
							<tr>
								<th>&nbsp;Key&nbsp;</th>
								<th>&nbsp;Description&nbsp;</th>
								<th>&nbsp;Value&nbsp;</th>
								<th>&nbsp;Applicability&nbsp;</th>
							</tr>
							<tr>
								<td>community_id</td>
								<td>Community identifier where the media has been published.</td>
								<td>
									A positive number.
								</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><b>id_media</b></td>
								<td>Media identifier.</td>
								<td>
									A positive number.
								</td>
								<td>yes</td>
							</tr>
							<tr>
								<td>id_media_panel</td>
								<td></td>
								<td></td>
								<td>no</td>
							</tr>
							<tr>
								<td>media_type</td>
								<td>Type of the media.</td>
								<td>
									A string. Possible values are: <ul> <li>document</li> <li>picture</li> <li>sound</li> <li>video</li> <li>3d_model: 3D model</li> <li>drawing</li> </ul> 
								</td>
								<td>yes</td>
							</tr>
							<tr>
								<td>orig_name</td>
								<td>Original source file name.</td>
								<td>
									A string (e.g. CATIA-Systems-Modeling.pptx). 
								</td>
								<td>yes</td>
							</tr>
							<tr>
								<td>published</td>
								<td>Indicates if the media is published or is a draft.</td>
								<td>
									 A boolean: <ul> <li>0: draft (not published). </li> <li>1: published. </li> </ul> 
								</td>
								<td>yes</td>
							</tr>
							<tr>
								<td>update</td>
								<td>Last update date of the media.</td>
								<td>
									 A date (see <a href="CAA3DSwymTaAboutWS.htm#DateFormatting">Date Format</a>). 
								</td>
								<td>yes</td>
							</tr>
						</table>
					</td>
					<td>yes</td>
				</tr>
				<tr>
					<td>message</td>
					<td>Upload status message.</td>
					<td>
						A string.
					</td>
					<td>yes</td>
				</tr>
				<tr>
					<td>subject6wuri</td>
					<td>Current Object Identification for 6W Tagging</td>
					<td>
						swym:dev:1:community:2
					</td>
					<td>yes</td>
				</tr>
			</table>
		</td>
		<td>yes</td>
	</tr>
	<tr>
		<td>success</td>
		<td>Status of the request on server.</td>
		<td>
			 A boolean: <ul> <li>true: success. </li> <li>false: failure. </li> </ul> 
		</td>
		<td>yes</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<h2><a name="Example"></a>Example</h2>
<p>Example of trace file</p>

<pre class="code">
##CLIENT REQUEST
##------------------------------------------------------------
[POST] https://pod46-231-145-217.3dexperience.3ds.com/api/media/addmedia/include_documents/true
  [HEADRER] X-SWYM (CSRF token): 3553065a
POST Data : 
-----------------------------288332095013036
Content-Disposition: form-data; name="fileName" 

3DSWYM.png
-----------------------------288332095013036
Content-Disposition: form-data; name="media_path"; filename="3DSWYM.png"
Content-Type: image/png

[MEDIA DATA]
-----------------------------288332095013036
Content-Disposition: form-data; name="published" 

0
-----------------------------288332095013036
Content-Disposition: form-data; name="category_id" 

0
-----------------------------288332095013036
Content-Disposition: form-data; name="description"

-----------------------------288332095013036
Content-Disposition: form-data; name="title"

3DSWYM
-----------------------------288332095013036
Content-Disposition: form-data; name="download_original_file"

0
-----------------------------288332095013036
Content-Disposition: form-data; name="is_illustration"

true
-----------------------------288332095013036
Content-Disposition: form-data; name="community_id"

1
-----------------------------288332095013036--
Content-Type=multipart/form-data; boundary=---------------------------288332095013036

##SERVER RESPONSE [200] OK
##--------------------

#RESPONSE HEADER : 
#--------------------
HTTP/1.1 200 OK
Date: Wed, 25 Jun 2014 11:39:19 GMT
Server: Apache/2.2.23 (Unix) mod_ssl/2.2.23 OpenSSL/1.0.0-fips PHP/5.3.15
X-Powered-By: PHP/5.3.15
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Pragma: no-cache
Cache-Control: no-cache
X-H: 1,0,1,3,2,3,8,1
Content-Encoding: gzip
Content-Length: 264
Content-Type: application/json
Vary: Accept-Encoding,User-Agent
Keep-Alive: timeout=5, max=95
Connection: Keep-Alive

#RESPONSE BODY
#--------------------
{
  "result":{
	"id":"2",
	"subject6wuri":"swym:dev:1:media:2",
	"message":"Media successfully uploaded !",
	"mediaUploaded":{
	  "id_media_panel":null,
	  "orig_name":"3DSWYM.png",
	  "id_media":"2",
	  "media_type":"picture",
	  "community_id":1,
	  "published":0,
	  "update":"2014-09-03 06:24:22"
	}
  },
  "request_id":null,
  "nb_result":1,
  "monitoring":{
    "last_exec_time":4.8526351451874
  },
  "success":true
}
</pre>

<script type="text/javascript">insertCopyright();</script>
</body>
</html>


<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 12.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="Stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css">
<script type="text/javascript" src="../CAADocJavaScript/DSDocHighlight.js"></script>
<script type="text/javascript" src="../CAADocJavaScript/submit.js"></script>
<title>Getting root manager of simulation representation</title>
<style type="text/css">
.style1 {
	font-family: monospace;
	color: #976970;
}
</style>
</head>

<body onload="highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1"><h1><a name="Top"></a>Getting root manager of simulation representation</h1></td>
	</tr>
	<tr>
		<td class="use">Use Case</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table class="abstract">
	<tr>
		<td>
		<h2>Abstract</h2>
		<p>This article explains how to open a simulation object and retrieve the scenario representation .</p>
		<ul>
			<li><a href="#Learn">What You Will Learn With This Use Case</a></li>
			<li><a href="#UseCase">The CAASimSpecifyAndComputeScenario Use Case</a>
			<ul>
				<li><a href="#What">What Does CAASimSpecifyAndComputeScenario Do?</a></li>
				<li><a href="#How">How to Launch CAASimSpecifyAndComputeScenario?</a></li>
				<li><a href="#Where">Where to Find the CAASimSpecifyAndComputeScenario Code?</a> </li>
			</ul>
			</li>
			<li><a href="#Step">Step-by-Step</a></li>
			<li><a href="#InShort">In Short</a></li>
			<li><a href="#References">References</a></li>
		</ul>
		</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Learn"></a>What You Will Learn With This Use Case</h2>
<p>This use case is intended to show (among others) an end user how to open an existing simulation and retrieve the Scenario representation using the Generic CAA APIs.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="UseCase"></a>The CAASimSpecifyAndComputeScenario Use Case</h2>
<p><code>CAASimSpecifyAndComputeScenario</code> is a use case of the <code>CAASimRepExtend.edu</code> framework
that illustrates the <code>CATSimRepInterfaces</code>, <code>CATSimRepAdp</code>, <code>CATSimRepExecution</code> and <code>CATSimPLMAppModelerItf</code> frameworks capabilities regarding scenario.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="What"></a>What Does CAASimSpecifyAndComputeScenario Do?</h3>
<p><code>CAASimSpecifyAndComputeScenario</code> is a &quot;batch&quot; that illustrates (among others)
how open a simulation object and retrieve the Scenario represenation.</p>
<p>The input model for this Use Case is shown in [<a href="#Fig1">Fig.1</a>].
It contains a simulation referencing a product with a FEM model owning a 3D mesh part and a structural property.
The use case will open the simulation starting from its ID and retrieve the Scenario representation. 
</p>
<table>
	<caption align="center"><a name="Fig1"></a>Fig1: The CAASimModels Model</caption>
	<tr>
		<td><img src="images/CAASimulation01.jpg"></td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="How"></a>How to Launch CAASimSpecifyAndComputeScenario?</h3>
<p>First, you need to import the <code>CAASimModels.3dxml</code> into your data base. You can find it under : 
<code>InstallRootFolder\CAADoc\CAASimRepExtend.edu\CAASimRepExtendEduRsc.m\src\resources</code></p>
<p><span lang="fr">Then t</span>o launch <code>CAASimSpecifyAndComputeScenario</code>, you will need to set up the build time environment 
and compile the <code>CAASimSpecifyAndComputeScenario.m</code> module along with its 
prerequisites [<a href="#References">1</a>]. Once it's built, set up the run time
environment and execute the following command: </p>
<p><code>mkrun -c &quot;<i><a>CAASimSpecifyAndComputeScenario</a>
<a>Repository</a> <a>Server</a> <a>User</a> <a>Password</a> <a>SecurityCtx</a> <a>PLM_Type</a> <a>PLM_External_Root</a> <a>V_version_Root</a></i>&quot;</p>

<p>
where:</p>
<table  id="table1" >
	<tr>		
		<th><b><i>Repository</i></b></th>
		<td><script type="text/javascript">insertRepository();</script></td>
	</tr>
	<tr>
		<th ><b><i>Server</i></b></th>
		<td >The server as host::<i> name</i>:<i>port_number/RootURI</i></td>
	</tr>
	<tr>
		<th><b><i>User</i></b></th>
		<td>The user name</td>
	</tr>
	<tr>
		<th><b><i>Password</i></b></th>
		<td>The user password to authenticate the user</td>
	</tr>
	<tr>
		<th><b><i>SecurityCtx</i></b></th>
		<td>a string representing the security context ( Role. Organization. Project&nbsp;);<o:p>
            Choose Role as Designer ( as the use case create the PLM Data)</o:p></td>
	</tr>
	<tr>
		<th><b>PLM_Type</b></th>
		<td>the PLM type of the Simulation to open</td>
	</tr>
	<tr>
		<th><b>PLM_External_Root</b></th>
		<td>the PLM Id of the Simulation to open</td>
	</tr>
	<tr>
		<th><b>V_version_Root</b></th>
		<td>the PLM version of the Simulation</td>
	</tr>
</table>
	
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Where"></a>Where to Find the CAASimSpecifyAndComputeScenario Code</h3>
<p>The CAASimSpecifyAndComputeScenario use case is made of a single 
file located in the <code>CAASimSpecifyAndComputeScenario.m</code> 
module of the <code>CAASimRepExtend.edu</code> 
framework:<br>
<code>InstallRootFolder\CAADoc\CAASimRepExtend.edu\CAASimSpecifyAndComputeScenario.m\</code></p>
<p>The use case relies on functions defined in the <code>CAAAdpUtilities.m</code> module of the
<code>CAAPLMClientAdapter.edu</code> framework:<br>
<code><i>InstallRootDirectory</i>\CAAPLMClientAdapter.edu\CAAAdpUtilities.m\</code></p>
<p>Where <code>InstallRootFolder</code> [<a href="#References">1</a>] is the folder 
where the API CD-ROM is installed.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Step"></a>Step-by-Step</h2>
<p>The CAASimSpecifyAndComputeScenario use case beginning can be divided into several steps understanding the 2 first steps :</p>
<ol>
	<li><a href="#OpenSimulation">Opening the simulation</a></li>
	<li><a href="#RetrieveScenarioRepresentation">Retrieve the Scenario representation</a></li>	
</ol>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="OpenSimulation"></a>Opening the simulation</h3>
<p>To open the simulation model, we use a service from the <code>CAAPLMClientAdapter.edu</code> framework.<br>
The simulation is instanciated through the CATISimulationPLMManager interface.</p>
<pre class="code">...
<span class="comment">//Get the simulation data (PLM_Type, version number etc...) from inputs</span>
const char * plmtype_n  = iArgv[6];
CATUnicodeString plmid_n = iArgv[7];
CATUnicodeString version_n = iArgv[8];
HRESULT hr = ::CAAAdpCreateSession(repository_n,server_n,user_n,password_n,security_n);

<span class="comment">//=====================================================================</span>
<span class="comment">// 1- Opens the simulation</span>
<span class="comment">//=====================================================================</span>

CATBoolean ExpandAll = TRUE;
CATIPLMNavReference * piNavRefOnRoot = NULL;  
CATOmbLifeCycleRootsBag newBag;
hr = ::CAAOpenPLMComponent(plmtype_n, plmid_n, version_n, IID_CATIPLMNavReference, (void **) &piNavRefOnRoot, newBag, ExpandAll);
if (FAILED(hr) || NULL == piNavRefOnRoot ) {return 1;}
<span class="comment">//-----------------------------------------------------------------------</span>
<span class="comment">// 2- Get the pointer on the CATISimulationPLMManager interface</span>
<span class="comment">//-----------------------------------------------------------------------</span>
CATISimulationPLMManager * piSimObj = NULL ;
piNavRefOnRoot->QueryInterface(IID_CATISimulationPLMManager, (void**) & piSimObj);  
if(!piSimObj) {return 1;}
...</pre>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="RetrieveScenarioRepresentation"></a>Retrieving the Scenario representation</h3>
<p>To get the Scenario representation root feature, we first need to get the Scenario category using the interface pointer on the simulation object previously obtained.</p>
<pre class="code">
...
CATISimScenarioRepManager_var spScenarioManager;
CATISimulationPLMManager::SimulationCategoryIdentifier iCategoryId = CATISimulationPLMManager::Scenario ;
CATBaseUnknown * piRoot = NULL;

HRESULT hr = piSimObj->GetRootManagerFromSO(iCategoryId, piRoot);
spScenarioManager = piRoot;
if(piRoot)  piRoot->Release();  piRoot = NULL;
...</pre>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="InShort"></a>In Short</h2>
<p>The <code>CAASimSpecifyAndComputeScenario</code> use case explains (among others) how to open an existing simulation and retrieve the Scenario representation,
using the Generic CAA APIs exposed in the <code>CATSimRepInterfaces</code>, <code>CATSimRepAdp</code>, <code>CATSimRepExecution</code> and <code>CATSimPLMAppModelerItf</code> frameworks.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="References"></a>References</h2>
<table class="reference">
	<tr>
		<td>[1]</td>
		<td><a href="../CAADocUseCases/CAADocRunSample.htm">
		Building and Launching a Use Case</a></td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [Sep 2011]</td>
		<td>Document created</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>

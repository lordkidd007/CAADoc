<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
<link href="../CAADocStyleSheets/caav5.css" rel="stylesheet" type="text/css"/>
<script src="../CAADocJavaScript/DSDocTocToc.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/DSDocHighlight.js" type="text/javascript">/* */</script>
<script src="../CAADocJavaScript/submit.js" type="text/javascript">/* */</script>
<title>CATDlgCombo</title>
</head>

<body onload="highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1><a name="Top"></a>CATDlgCombo</h1>
		</td>
	</tr>
	<tr>
		<td class="quick">Quick Reference</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<pre><a href="CAADlgQrCATDialog.htm">CATDialog</a>
  |
  +---<a href="CAADlgQrCATDlgControl.htm">CATDlgControl</a>
        |
        +---<a href="#" onclick="javascript:CAAlink('CPP', 'Dialog', 'class', 'CATDlgCombo'); return false;">CATDlgCombo</a></pre>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table>
	<caption>The Combo</caption>
	<tr>
		<td>
		<img alt="CATDlgCombo" height="78" src="images/CAADlgCATDlgCombo.jpg" width="96"/></td>
		<td>The combo allows the end user to choose a value or an option by selecting 
		a character string from a predefined list, or through a keyboard entry.</td>
	</tr>
</table>
<p>Use a combo whenever you propose to the end user to select an alphanumerical 
value from a discrete list, or enter an alphanumerical value to update a discrete 
list.</p>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table>
	<caption><a name="Styles"></a>Styles</caption>
	<thead>
		<tr>
			<th>Name</th>
			<th>Display</th>
			<th>Description</th>
		</tr>
	</thead>
	<tr>
		<td>default</td>
		<td>
		<img alt="Standard Combo" height="78" src="images/CAADlgCATDlgCombo.jpg" width="96"/></td>
		<td>The standard combo, composed of an entry zone which displays the selected 
		value, and a list permanently displayed.</td>
	</tr>
	<tr>
		<td>CATDlgCmbDropDown</td>
		<td>
		<img alt="Drop Down Combo" height="23" src="images/CAADlgCATDlgComboDropDown1.jpg" width="111"/></td>
		<td>The drop down combo, composed of an entry zone which displays the selected 
		value, and the list of values to select in, displayed when the arrow located 
		on the right of the entry zone is selected.</td>
	</tr>
	<tr>
		<td>CATDlgCmbOptionStyle</td>
		<td></td>
		<td>The option style combo, which is very near of the drop down combo with 
		a Motif style. This type of combo is replaced by a CATDlgCmbDropDown combo 
		with Windows.</td>
	</tr>
	<tr>
		<td>CATDlgCmbEntry</td>
		<td></td>
		<td>Allows for keyboard text entry in addition to text selection for drop 
		down and standard combos.</td>
	</tr>
	<tr>
		<td>CATDlgCmbDouble</td>
		<td>
		<img alt="Double Precision Combo" height="78" src="images/CAADlgCATDlgComboDouble.jpg" width="94"/></td>
		<td>The entered number must be a double precision floating number.</td>
	</tr>
	<tr>
		<td>CATDlgCmbColor</td>
		<td>
		<img alt="Color Combo" height="23" src="images/CAADlgCATDlgComboColor1.jpg" width="109"/></td>
		<td>Shows a color palette. Available in conjunction with CATDlgCmbDropDown 
		only</td>
	</tr>
	<tr>
		<td>CATDlgCmbLineType</td>
		<td>
		<img alt="Line Type Combo" height="24" src="images/CAADlgCATDlgComboLineType1.jpg" width="111"/></td>
		<td>Shows a linetype palette. Available in conjunction with CATDlgCmbDropDown 
		only</td>
	</tr>
	<tr>
		<td>CATDlgCmbBitmap</td>
		<td></td>
		<td>Shows an icon palette. Available in conjunction with CATDlgCmbDropDown 
		only</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table>
	<caption><a name="Events"></a>Events</caption>
	<thead>
		<tr>
			<th>Notification</th>
			<th>Method</th>
			<th>Sent when</th>
		</tr>
	</thead>
	<tr>
		<td>CATDlgComboSelectNotification</td>
		<td><code>GetComboSelectNotification</code></td>
		<td>Whenever a value is selected in the list.</td>
	</tr>
	<tr>
		<td>CATDlgComboDropNotification</td>
		<td><code>GetComboDropNotification</code></td>
		<td>Whenever the list of values is displayed</td>
	</tr>
	<tr>
		<td colspan="3"><strong>Available with CATDlgCmbEntry only</strong>:</td>
	</tr>
	<tr>
		<td>CATDlgComboModifyNotification</td>
		<td><code>GetComboModifyNotification</code></td>
		<td>Whenever the keyboard entry is modified by selection.</td>
	</tr>
	<tr>
		<td>CATDlgEditModifyNotification</td>
		<td><code>GetEditModifyNotification</code></td>
		<td>Whenever the keyboard entry is modified by editing.</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2>Programmer's Guide</h2>
<p>The combo is dedicated to executing a command when it is clicked.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Constructor"></a>Constructing a Combo</h3>
<p>These kinds of combo can be constructed, according to their different styles. 
Styles can be concatenated using the &quot;|&quot; character.</p>
<table>
	<tr>
		<td><em>Standard combo</em></td>
		<td>
		<pre class="code">_pCombo            = new CATDlgCombo (iParent, iName);</pre>
		</td>
	</tr>
	<tr>
		<td><em>DropDown combo</em></td>
		<td>
		<pre class="code">_pDropDownCombo    = new CATDlgCombo (iParent, iName,
                                   <strong>CATDlgCmbDropDown</strong>);</pre>
		</td>
	</tr>
	<tr>
		<td><em>Option style combo</em></td>
		<td>
		<pre class="code">_pOptionStyleCombo = new CATDlgCombo (iParent, iName,
                                   <strong>CATDlgCmbOptionStyle</strong>);</pre>
		</td>
	</tr>
	<tr>
		<td><em>Double number combo</em></td>
		<td>
		<pre class="code">_pDoubleCombo      = new CATDlgCombo (iParent, iName,
                                   <strong>CATDlgCmpDouble</strong>);</pre>
		</td>
	</tr>
	<tr>
		<td><em>Color combo</em></td>
		<td>
		<pre class="code">_pColorCombo       = new CATDlgCombo (iParent, iName,
                               <strong>CATDlgCmbColor</strong>|<strong>CATDlgCmbDropDown</strong>);</pre>
		</td>
	</tr>
	<tr>
		<td><em>Linetype combo</em></td>
		<td>
		<pre class="code">_pLinetypeCombo    = new CATDlgCombo (iParent, iName,
                               <strong>CATDlgCmbLineType</strong>|<strong>CATDlgCmbDropDown</strong>);</pre>
		</td>
	</tr>
	<tr>
		<td><em>Bitmap combo</em></td>
		<td>
		<pre class="code">_pBitmapCombo      = new CATDlgCombo (iParent, iName,
                               <strong>CATDlgCmbBitmap</strong>|<strong>CATDlgCmbDropDown</strong>);</pre>
		</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3>Color Combo</h3>
<table>
	<tr>
		<td>
		<img alt="Color Combo" height="23" src="images/CAADlgCATDlgComboColor1.jpg" width="109"/></td>
		<td>A color combo displays a color palette that can contain up to 16 million 
		colors. Colors are assigned for each line using the RGB values ranging each 
		from 0 to 255 passed as parameters of the <code>SetLine</code> method. The 
		selected or current color is displayed in the entry zone.</td>
	</tr>
	<tr>
		<td>
		<img alt="Color Combo" height="110" src="images/CAADlgCATDlgComboColor2.jpg" width="111"/></td>
		<td>When the end user clicks on the arrow, the color palette is displayed 
		and another color can be selected. The number of displayed colors is set 
		using the <code>SetVisibleTextHeight</code> method.</td>
	</tr>
	<tr>
		<td>
		<img alt="Color Combo with Color Names" height="23" src="images/CAADlgCATDlgComboColor3.jpg" width="108"/></td>
		<td>A name can be assigned to each color. It is displayed beside the color.</td>
	</tr>
	<tr>
		<td>
		<img alt="Color Combo with Color Names" height="111" src="images/CAADlgCATDlgComboColor4.jpg" width="109"/></td>
		<td>The color names are read from the combo resource file. CATUnicodeString 
		instances must be built from these names, and passed as parameters of the
		<code>SetLine</code> method.</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3>Linetype Combo</h3>
<table>
	<tr>
		<td>
		<img alt="Line Type Combo" height="24" src="images/CAADlgCATDlgComboLineType1.jpg" width="111"/></td>
		<td>A linetype combo displays a linetype palette. Linetypes are assigned 
		for each line using a pixel pattern expressed using two bytes, a repeating 
		factor of this pattern, and a width expressed as a pixel number, passed 
		as parameters of the <code>SetLine</code> method. The selected or current 
		linetype is displayed in the entry zone.</td>
	</tr>
	<tr>
		<td>
		<img alt="Line Type Combo" height="161" src="images/CAADlgCATDlgComboLineType2.jpg" width="110"/></td>
		<td>When the end user clicks on the arrow, the linetype palette is displayed 
		and another linetype can be selected. The number of displayed linetypes 
		is set using the <code>SetVisibleTextHeight</code> method.</td>
	</tr>
	<tr>
		<td>
		<img alt="Line Type Combo with Line Type Names" height="24" src="images/CAADlgCATDlgComboLineType3.jpg" width="110"/></td>
		<td>A name can be assigned to each linetype. It is displayed beside the 
		linetype.</td>
	</tr>
	<tr>
		<td>
		<img alt="Line Type Combo with Line Type Names" height="161" src="images/CAADlgCATDlgComboLineType4.jpg" width="110"/></td>
		<td>The linetype names are read from the combo resource file. CATUnicodeString 
		instances must be built from these names, and passed as parameters of the
		<code>SetLine</code> method.</td>
	</tr>
</table>
<p>The linetype is built using a bit pattern, or mask, encoded on two bytes. This 
mask is shown below for Dashed, DotDashed, and Solid respectively.</p>
<p>
<img alt="Line Type Mask" height="240" src="images/CAADlgCATDlgComboLinetype.gif" width="469"/></p>
<p>This mask can be used with a mapping of one pixel for one bit. Each bit can also 
be repeated on several pixels. This enlarges the mask. The linetype thickness is 
set as a number of pixels. The code that creates the combo shown above without the 
linetype names is as follows:</p>
<pre class="code">...
CATUnicodeString * pucsEmpty = new CATUnicodeString();
unsigned short Mask[8] = {0xffff, 0x3333, 0x7777, 0x0c3f, 0x5757, 0xcccc, 0x7ffb, 0x5bbc};
unsigned short Repeat[8] = {1, 4, 4, 2, 8, 1, 4, 4};

_pLinetypeCombo-&gt;SetLine(*pucsEmpty, Mask[0], Repeat[0], 1, 0);
_pLinetypeCombo-&gt;SetLine(*pucsEmpty, Mask[1], Repeat[1], 1, 1);
_pLinetypeCombo-&gt;SetLine(*pucsEmpty, Mask[2], Repeat[2], 1, 2);
_pLinetypeCombo-&gt;SetLine(*pucsEmpty, Mask[3], Repeat[3], 1, 3);
_pLinetypeCombo-&gt;SetLine(*pucsEmpty, Mask[4], Repeat[4], 1, 4);
_pLinetypeCombo-&gt;SetLine(*pucsEmpty, Mask[5], Repeat[5], 1, 5);
_pLinetypeCombo-&gt;SetLine(*pucsEmpty, Mask[6], Repeat[6], 1, 6);
_pLinetypeCombo-&gt;SetLine(*pucsEmpty, Mask[7], Repeat[7], 3, 7);
...</pre>
<p>The fourth parameter is the thickness expressd in pixels. It is set to 1, except 
for the last linetype for which it is set to 3 pixels. The last parameter is the 
line number.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Prog1"></a>Managing the Line Content</h3>
<p>Lines in a combo are numbered beginning with 0.</p>
<ul>
	<li>You can retrieve the number of lines with <code>GetLineCount</code>:
		<pre class="code">int LineCount = _pCombo-&gt;GetLineCount();</pre>
	</li>
	<li>You can get the content of a line with <code>GetLine</code>. For example, 
		retrieve the content of the fourth line.
		<table>
			<tr>
				<td></td>
				<td>
				<pre class="code">int iLineNumber = 3;</pre>
				</td>
			</tr>
			<tr>
				<td><em>Standard, dropdown, or option style combo</em></td>
				<td>
				<pre class="code">CATUnicodeString oLineContent;
_pCombo-&gt;GetLine(oLineContent, iLineNumber);</pre>
				</td>
			</tr>
			<tr>
				<td><em>Double combo</em></td>
				<td>
				<pre class="code">double oLineValue;
oLineValue = _pDoubleCombo-&gt;GetLine(iLineNumber);</pre>
				</td>
			</tr>
			<tr>
				<td><em>Color combo</em></td>
				<td>
				<pre class="code">unsigned char oRed, oGreen, oBlue;
_pColorCombo-&gt;GetLine(oLineContent, oRed, oGreen, oBlue, iLineNumber);</pre>
				</td>
			</tr>
			<tr>
				<td><em>Linetype combo</em></td>
				<td>
				<pre class="code">unsigned short oMask, oRepeat, oWeight;
_pLinetypeCombo-&gt;GetLine(oLineContent, oMask, oRepeat, oWeight, iLineNumber);</pre>
				</td>
			</tr>
		</table>
	</li>
	<li>You can set the content of a line with <code>SetLine</code>. For example, 
		set the content of the third line.
		<table>
			<tr>
				<td></td>
				<td>
				<pre class="code">int iLineNumber = 2;</pre>
				</td>
			</tr>
			<tr>
				<td><em>Standard, dropdown, or option style combo</em></td>
				<td>
				<pre class="code">CATUnicodeString iLineContent = ...;
_pCombo-&gt;SetLine(iLineContent, iLineNumber);</pre>
				</td>
			</tr>
			<tr>
				<td><em>Double combo</em></td>
				<td>
				<pre class="code">double iLineValue;
_pDoubleCombo-&gt;SetLine(iLineValue, iLineNumber);</pre>
				</td>
			</tr>
			<tr>
				<td><em>Color combo</em></td>
				<td>
				<pre class="code">// Set athe red color
unsigned char iRed=255, iGreen=0, iBlue=0;
_pColorCombo-&gt;SetLine(iLineContent, iRed, iGreen, iBlue, iLineNumber);</pre>
				</td>
			</tr>
			<tr>
				<td><em>Linetype combo</em></td>
				<td>
				<pre class="code">// Set a solid line
unsigned short iMask=0xffff, iRepeat=1, iWeight=1;
_pLinetypeCombo-&gt;SetLine(iLineContent, iMask, iRepeat, iWeight, iLineNumber);</pre>
				</td>
			</tr>
		</table>
	</li>
	<li>You can delete all lines, a given line, or several lines.
		<table>
			<tr>
				<td><em>delete all lines</em></td>
				<td>
				<pre class="code">_pCombo-&gt;ClearLine();</pre>
				</td>
			</tr>
			<tr>
				<td><em>delete the fourth line</em></td>
				<td>
				<pre class="code">int LineToClear = 3;
_pCombo-&gt;ClearLine(LineToClear);</pre>
				</td>
			</tr>
			<tr>
				<td><em>delete four lines (2nd, 5th, 9th, and 12th)</em></td>
				<td>
				<pre class="code">int LinesToClear[4] = {1, 4, 8, 11};
int NumberOfLinesToClear = 4;
_pCombo-&gt;ClearLine(LinesToClear, NumberOfLinesToClear);</pre>
				</td>
			</tr>
		</table>
	</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Prog2"></a>Managing the Line Display</h3>
<p>To help manage the line display in the combo, you can use the following methods:</p>
<ul>
	<li>Managing the number of lines displayed with <code>GetVisibleTextHeight</code> 
		and <code>SetVisibleTextHeight</code>:
		<table>
			<tr>
				<td><em>get number of visible lines</em></td>
				<td>
				<pre class="code">int Height;
Height = _pCombo-&gt;<code>GetVisibleTextHeight</code>();</pre>
				</td>
			</tr>
			<tr>
				<td><em>set number of visible lines</em></td>
				<td>
				<pre class="code">int Height = 10;
_pCombo-&gt;<code>SetVisibleTextHeight</code>(Height);</pre>
				</td>
			</tr>
		</table>
	</li>
	<li>Managing the number of visible characters in the entry zone with <code>GetVisibleTextWidth</code> 
		and <code>SetVisibleTextWidth</code>:
		<table>
			<tr>
				<td><em>get number of visible characters</em></td>
				<td>
				<pre class="code">int <code>Width</code>;
<code>Width</code> = _pCombo-&gt;<code>GetVisibleTextWidth</code>();</pre>
				</td>
			</tr>
			<tr>
				<td><em>set number of visible characters</em></td>
				<td>
				<pre class="code">int <code>Width</code> = 15;
_pCombo-&gt;<code>SetVisibleTextWidth</code>(<code>Width</code>);</pre>
				</td>
			</tr>
		</table>
		<p>The visible text width is expressed in number of characters.</p>
	</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Prog3"></a>Managing the Selection</h3>
<p>You can manage the selection with the methods <code>GetSelect</code>, <code>SetSelect</code>, 
and <code>ClearSelect</code>:</p>
<table>
	<tr>
		<td><em>get the selected line number</em></td>
		<td>
		<pre class="code">int SelectedLineNumber;
SelectedLineNumber = _pCombo-&gt;GetSelect();</pre>
		</td>
	</tr>
	<tr>
		<td><em>set the selected line as the 9th line</em></td>
		<td>
		<pre class="code">int SelectedLineNumber = 8;
_pCombo-&gt;SetSelect(SelectedLineNumber);</pre>
		</td>
	</tr>
	<tr>
		<td><em>clear the selection</em></td>
		<td>
		<pre class="code">_pCombo-&gt;ClearSelect();</pre>
		</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<h3><a name="Prog4"></a>Managing the Keyboard Entry</h3>
<p>You can manage the keyboard entry field with the methods <code>GetField</code>,
<code>SetField</code>, and <code>ClearField</code>:</p>
<table>
	<tr>
		<td><em>get the entry field</em></td>
		<td>
		<pre class="code">CATUnicodeString FieldText;
_pCombo-&gt;GetField(FieldText);</pre>
		</td>
	</tr>
	<tr>
		<td><em>get the entry field for a double combo</em></td>
		<td>
		<pre class="code">double FieldValue;
FieldValue = _pDoubleCombo-&gt;GetField();</pre>
		</td>
	</tr>
	<tr>
		<td><em>set the entry field</em></td>
		<td>
		<pre class="code">CATUnicodeString FieldText = ...;
_pCombo-&gt;SetField(FieldText);</pre>
		</td>
	</tr>
	<tr>
		<td><em>set the entry field for a double combo</em></td>
		<td>
		<pre class="code">double FieldValue = 3.14159;
_pDoubleCombo-&gt;SetField(FieldValue );</pre>
		</td>
	</tr>
	<tr>
		<td><em>clear the entry field</em></td>
		<td>
		<pre class="code">_pCombo-&gt;ClearField();</pre>
		</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Callback"></a>Setting a Callback on a Combo</h3>
<p>Set a callback on a non editable combo to be informed whenever the end user selects 
a value in the combo:</p>
<pre class="code">AddAnalyseNotificationCB(
  _pCombo,                                    // combo 
  _pCombo-&gt;GetComboSelectNotification(),      // notification
  (CATCommand)&amp;Combo::MethodToExecute,        // method to execute 
  CATCommandClientData iUsefulData);          // useful data for this method </pre>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Resources"></a>Setting a Title to a Combo</h3>
<p>The combo title should be set by the resource file using a key built with the 
identifier you declare as the second parameter of the combo constructor. This title 
is never displayed. If you want to comment the choice available from the combo in 
your dialog, use a <a href="CAADlgQrCATDlgLabel.htm">CATDlgLabel</a>.</p>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [Jan 2000]</td>
		<td>Document created</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>

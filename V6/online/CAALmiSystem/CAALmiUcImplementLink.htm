<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Language" content="en-us" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css"/>
<script type="text/javascript" src="../CAADocJavaScript/DSDocTocToc.js">/* */</script>
<script type="text/javascript" src="../CAADocJavaScript/DSDocHighlight.js">/* */</script>
<script type="text/javascript" src="../CAADocJavaScript/submit.js">/* */</script>
<title>Managing System and Process Occurrences</title>
</head>

<body onload="highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1>Managing System and Process Occurrences</h1>
		</td>
	</tr>
	<tr>
		<td class="use">Use Case</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table class="abstract">
	<tr>
		<td>
		<h2>Abstract</h2>
		<p>This article describes an example of use of Framework DELPPRSystemItf</p>
		<p>This use case shows how to assign a system occurrence to a process occurrence; 
		    how to navigate along occurrences linked by this relationship and unassign the 
            operation instance from the process.</p>
		<ul>
			<li><a href="#Learn">What You Will Learn With This Use Case</a></li>
			<li><a href="#UseCase">The CAALmiImplementLink Use Case</a>
			<ul>
				<li><a href="#What">What Does CAALmiImplementLink Do</a></li>
				<li><a href="#How">How to Launch CAALmiImplementLink</a></li>
				<li><a href="#Where">Where to Find the CAALmiImplementLink Code</a>
				</li>
			</ul>
			</li>
			<li><a href="#Step">Step-by-Step</a></li>
			<li><a href="#InShort">In Short</a></li>
			<li><a href="#References">References</a></li>
		</ul>
		</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Learn"></a>What You Will Learn With This Use Case</h2>
<p>In this use case, you will learn how to use the DELIPPRSystemAuth and DELIPPRSystemNav 
interfaces in order to:</p>
<ul>
	<li>Assign a system occurrence to a process occurrence, creating an underlying 
	implement link [<a href="#References">2</a>] between them.</li>
	<li>Navigate with the implement link from Process to system and from system to Process.</li>
    <li>Remove the implement link created between them.</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="UseCase"></a>The CAALmiImplementLink Use Case</h2>
<p>CAALmiImplementLink is a use case of the CAAPPRSystemItf.edu framework that 
illustrates DELPPRSystemItf framework capabilities.</p>
<script type="text/javascript">insertLinkToTop();</script>
<h3><a name="What"></a>What Does CAALmiImplementLink Do</h3>
<ul>
	<li>Query root system and process references.</li>
	<li>Inserts them into the Bag.</li>
	<li>Get the process occurrence and system occurrence.</li>
	<li>Creates an implement link between both.</li>
	<li>Navigates from Process to System and from System to Process Occurrences 
	following this assigned relationship.
	</li>
    <li>Unassign the system from process occurrence.</li>
</ul>
<p><strong>Implement link creation behaviors</strong></p>
<table>
	<caption><strong>Fig. 1</strong> : Structure of This Use Case to Show Implement 
	Link 
        Creation</caption>
	<tr>
		<td>
		<img src="images/CAALmiImplementLink_Structure.png" alt="Model Structure"/>
		</td>
	</tr>
</table>
<p>The creation fails if the scope crosses an existing scope. If Implement links 
(assignments) preexist, they are impacted by the scope creation as such.</p>
<p><strong>Implementation link creation in respect to the scope position</strong><br />
    System is assigned to a process instance in respect with the first upward scope. 
The ability to assign is checked before implement link creation.</p>
<p><strong>Use case Objects</strong>: <code>CAALmiImplementLink</code></p>
<p><strong>Expected Result</strong>: The result is a return code, its value is:</p>
<ul>
	<li>0 on successful completion</li>
	<li>1 if execution failed.</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="How"></a>How to Launch CAALmiImplementLink</h3>
<p>To launch CAALmiImplementLink, you will need to set up the build time environment, 
then compile CAALmiImplementLink along with its prerequisites, set up the run time 
environment, and then execute the use case [<a href="#References">1</a>].</p>
<p><strong>Additional instructions:</strong></p>
    <p>This use case is using data created by another use case [<a href="#References">3</a>], 
that you should run first.</p>
    <p>mkrun -c &quot;CAALmiImplementLink Repository Server User 
Password SecurityCtx Environment&quot;<br />
where:</p>
<table class="fill">
	<tr>
		<th>Parameter</th>
		<th>Description</th>
	</tr>
	<tr>
		<td>Repository</td>
		<td>The name of the repository (or provider)</td>
	</tr>
	<tr>
		<td>Server</td>
		<td>The name and port of the server</td>
	</tr>
	<tr>
		<td>User</td>
		<td>The user identifier</td>
	</tr>
	<tr>
		<td>Password</td>
		<td>The user password</td>
	</tr>
	<tr>
		<td>SecurityCtx</td>
		<td>A string representing the security context (Role.Organization.Project)</td>
	</tr>
	<tr>
		<td>Environment</td>
		<td>A PLM Environment containing a modeler customization</td>
	</tr>
</table>
<p><strong>Example:</strong> <code>mkrun -c &quot;CAALmiImplementLink PLM1 ve4al10dsy:8090 uxodtipt 
Ovb2pcds VPMADMIN.ADMIN.DEFAULT VPM&quot;</code></p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Where"></a>Where to Find the CAALmiImplementLink Code.</h3>
<p>The CAALmiImplementLink use case is made of a file located in the CAALmiImplementLink.m 
module of the CAAPPRSystemItf.edu framework:</p>
<p><code>InstallRootFolder\CAADoc\CAAPPRSystemItf.edu\CAALmiImplementLink.m</code></p>
<p><em>Main files:</em></p>
<pre class="code">CAAPPRSystemItf.edu/CAALmiImplementLink.m/src/CAALmiCAALmiImplementLink.cpp
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiSessionServices.h
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiFindServices.h
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiReleaseServices.h
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiOccurrenceServices.h
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiSessionServices.cpp
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiFindServices.cpp
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiReleaseServices.cpp
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiOccurrenceServices.cpp</pre>
<pre class="code">CAAPLMClientAdapter.edu/PublicInterfaces/CAAAdpCreateCloseSession.h</pre>
<p><em>Documented Frameworks (CAA files):</em></p>
<pre class="code">
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemOccAuth');return false;">/PublicInterfaces/DELIPPRSystemOccAuth.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemAuth');return false;">/PublicInterfaces/DELIPPRSystemAuth.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemNav');return false;">/PublicInterfaces/DELIPPRSystemNav.h</a>
</pre>
<pre class="code">
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'interface', 'CATIPLMNavReference');return false;">/PublicInterfaces/CATIPLMNavReference.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'class', 'CATListPtrCATIPLMNavReference');return false;">/PublicInterfaces/CATListPtrCATIPLMNavReference.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'interface', 'CATIPLMNavEntity');return false;">/PublicInterfaces/CATIPLMNavEntity.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'class', 'CATListPtrCATIPLMNavEntity');return false;">/PublicInterfaces/CATListPtrCATIPLMNavEntity.h</a></pre>
<pre class="code">
<a href="#" onclick="javascript:CAAlink('CPP', 'ObjectModelerBase');return false;">ObjectModelerBase</a><a href="#" onclick="javascript:CAAlink('CPP', 'ObjectModelerBase', 'class', 'CATOmbLifeCycleRootsBag');return false;">/PublicInterfaces/CATOmbLifeCycleRootsBag.h</a>
</pre>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Step"></a>Step-by-Step</h2>
<p>There are six logical steps in CAALmiImplementLink:</p>
<ol>
	<li><a href="#1">Retrieving the DELIPPRSystemAuth and DELIPPRSystemNav Interfaces</a></li>
	<li><a href="#2">Querying Root Process and Root System References in the Database.</a><ol>
		<li><a href="#2">Root Process and Root System References Are Inserted 
		into the Bag</a></li>
	</ol>
	</li>
	<li><a href="#3">Retrieving Occurrences of Process and of System</a></li>
	<li><a href="#4">Assigning the System Occurrence to the Process Occurrence</a></li>
	<li><a href="#5">Browsing Assigned System and Process Occurrences</a></li>
    <li><a href="#6">Removing the Implement Link between the System and Process</a></li>
</ol>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="1"></a>Retrieving the DELIPPRSystemAuth and DELIPPRSystemNav 
Interfaces</h3>
<pre class="code">
DELIPPRSystemAuth_var hPPRSystemAuth;
rc = ::GetPPRSystemAuth(hPPRSystemAuth);
DELIPPRSystemNav_var hPPRSystemNav;
rc = ::GetPPRSystemNav(hPPRSystemNav);</pre>
<p>The DELIPPRSystemAuth interface will later be used to create and remove the relation between 
System and Process and the DELIPPRSystemNav interface to navigate along it.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="2"></a>Querying Root Process and Root System References in the Database.</h3>
<pre class="code">
CATOmbLifeCycleRootsBag Bag;
CATAdpAttributeSet AttributeSetSystem;
AttributeSetSystem.AddAttribute("PLM_ExternalID","GeneralSystem.1"); 
AttributeSetSystem.AddAttribute("V_version","---"); 

CATIType_var spTypeSystem;
rc = CATCkePLMNavPublicServices::RetrieveKnowledgeType("DELLmiGeneralSystemReference",spTypeSystem);

CATIPLMNavReference * piRootSystem = NULL;
int ret = CAALmiFindServices::FindReference(Bag, AttributeSetSystem, 
		                                    spTypeSystem, 
		                                    IID_CATIPLMNavReference, 
		                                    (void **)&amp;piRootSystem);

CATAdpAttributeSet AttributeSetProcess;
AttributeSetProcess.AddAttribute(&quot;PLM_ExternalID&quot;,&quot;Assemble.1&quot;); 
AttributeSetProcess.AddAttribute(&quot;V_version&quot;,&quot;---&quot;); 
CATIType_var spTypeProcess;
rc = CATCkePLMNavPublicServices::RetrieveKnowledgeType(&quot;DELFmiFunctionReference&quot;,spTypeProcess);

CATIPLMNavReference * piRootProcess = NULL;
int ret = CAALmiFindServices::FindReference(Bag, AttributeSetProcess,
                                            spTypeProcess, 
                                            IID_CATIPLMNavReference, 
                                            (void **)&amp;piRootProcess);
</pre>                                            
<p>The DELIPPRSystemAuth interface will be later used to create relation between 
System and Process and to navigate along it.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="3"></a>Retrieving Occurrences of Process and of System</h3>
<pre class="code">
CATIPLMNavOccurrence_var hNavOccOnOperationInst;
rc = CAALmiOccurrenceServices::GetOccurrenceFromSingleSystemChild(hNavRefOnRootSystem, hNavOccOnOperationInst);

CATIPLMNavOccurrence_var hNavOccOnProcessInst;
rc = CAALmiOccurrenceServices::GetOccurrenceFromSingleProcessChild(hNavRefOnRootProcess, hNavOccOnProcessInst);</pre>
<p>The custom service &quot;CAALmiOccurrenceServices::GetOccurrenceFromSingle[System|Process]Child(..)&quot; 
is used to retrieve single occurrence of Process and System.<br />
See next step for some explanations.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="4"></a>Assigning the System Occurrence to the Process Occurrence</h3>
<pre class="code">
rc = hPPRSystemAuth-&gt;AssignProcess(hNavOccOnOperationInst, hNavOccOnProcessInst);</pre>
<p>DELIPPRSystemAuth performs &quot;Implement Link&quot; [<a href="#References">2</a>] creation.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="5"></a>Browsing Assigned System and Process Occurrences</h3>
<pre class="code">CATListPtrCATIPLMNavOccurrence listProcessOcc;
rc = hPPRSystemNav-&gt;GetListOfAssignedProcesses(hNavOccOnOperationInst, hNavRefOnRootProcess, listProcessOcc);
CATListPtrCATIPLMNavOccurrence listOperationOcc;
rc = hPPRSystemNav-&gt;GetListOfAssignedOperations(hNavOccOnProcessInst, 
                                                hNavRefOnRootSystem, 
                                                hNavRefOnRootSystem, 
                                                listOperationOcc);</pre>											
<p>Using the DELIPPRSystemNav interface, occurrences are navigated in both direction, 
from the Process to the system and then in the other direction.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="6"></a>Removing the Implement Link between the System and Process</h3>
<pre class="code">
rc = hPPRSystemAuth-&gt;UnAssignProcess(hNavOccOnOperationInst, hNavOccOnProcessInst);</pre>											
<p>Using the DELIPPRSystemAuth interface, the implement link created can be removed.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="InShort"></a>In Short</h2>
<p>Systems may be assigned/unassigned to a Process occurrence via Implements Links and navigating 
between them is made possible through the DELIPPRProcessNav Class.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="References"></a>References</h2>
<table class="reference">
	<tr>
		<td>[1]</td>
		<td>
		<a href="../CAADocUseCases/CAADocRunSample.htm">
		Building and Launching a Use Case</a></td>
	</tr>
	<tr>
		<td>[2]</td>
		<td>Inter-Modeler Links
		<a href="#" onclick="javascript:CAAlinkOutOfPreqs('CAAPilPhysImplLink/CAAPilPhysImplLinkUseItfToc.htm');return false;">
		Physical-Logical</a></td>
	</tr>
	<tr>
		<td>[3]</td>
		<td>
		<a href="CAALmiUcScopeLink.htm">Managing a Scope Link</a></td>
	</tr>
	</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [Jul 2012]</td>
		<td>Document created</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>

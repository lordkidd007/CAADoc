<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Language" content="en-us" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css"/>
<script type="text/javascript" src="../CAADocJavaScript/DSDocTocToc.js">/* */</script>
<script type="text/javascript" src="../CAADocJavaScript/DSDocHighlight.js">/* */</script>
<script type="text/javascript" src="../CAADocJavaScript/submit.js">/* */</script>
<title>Managing a Scope Link</title>
</head>

<body onload="highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1><a name="Top"></a>Managing a Scope Link</h1>
		</td>
	</tr>
	<tr>
		<td class="use">Use Case</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table class="abstract">
	<tr>
		<td>
		<h2>Abstract</h2>
		<p>This article describes an example of use of the framework DELPPRSystemItf.</p>
		<p>This use case shows how to insert a scope link between a system reference 
		and a process reference; and how to navigate along references linked by 
		this relationship.</p>
		<ul>
			<li><a href="#Learn">What You Will Learn With This Use Case</a></li>
			<li><a href="#UseCase">The CAALmiScopeLink Use Case</a>
			<ul>
				<li><a href="#What">What Does CAALmiScopeLink Do</a></li>
				<li><a href="#How">How to Launch CAALmiScopeLink</a></li>
				<li><a href="#Where">Where to Find the CAALmiScopeLink Code</a></li>
			</ul>
			</li>
			<li><a href="#Step">Step-by-Step</a></li>
			<li><a href="#InShort">In Short</a></li>
			<li><a href="#References">References</a></li>
		</ul>
		</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Learn"></a>What You Will Learn With This Use Case</h2>
<p>In this use case, you will learn how to use the DELIPPRSystemAuth and DELIPPRSystemNav 
interfaces in order to:</p>
<ul>
	<li>Create a Scope Link from a system reference to a process reference.</li>
	<li>Navigate on Scope relations from Process to System or from System to Process.</li>
</ul>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="UseCase"></a>The CAALmiScopeLink Use Case</h2>
<p>CAALmiScopeLink is a use case of the CAAPPRSystemItf.edu framework that illustrates 
DELPPRSystemItf framework capabilities.</p>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="What"></a>What Does CAALmiScopeLink Do</h3>
<ul>
	<li>Query root system and process references.</li>
	<li>Inserts them into the Bag.</li>
	<li>Creates a Scope link between both.</li>
	<li>Navigates from Process to System and from System to Process reference following 
	Scope Links.</li>
</ul>
<p><strong>Usecase Objects</strong>:<code>CAALmiScopeLink</code></p>
<p><strong>Expected Result:</strong><br />
The result is a return code, its value is :</p>
<ul>
	<li>0 on successful completion</li>
	<li>1 if execution failed.</li>
</ul>
<table>
	<caption>Fig. 1: Model Structure of this Use Case</caption>
	<tr>
		<td>
		<img src="images/CAALmiScopeLink_Structure.png" width="450px" alt="Model Structure"/></td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="How"></a>How to Launch CAALmiScopeLink</h3>
<p>To launch CAALmiScopeLink, you will need to set up the build time environment, 
then compile CAALmiScopeLink along with its prerequisites, set up the run time environment, 
and then execute the use case [<a href="#References">1</a>].</p>
<p><em>Additional instructions:</em></p>
<p>This use case is using data created by another use case [<a href="#References">2</a>], 
that you should run first.</p>
<p>mkrun -c &quot;CAALmiScopeLink Repository Server User Password 
SecurityCtx Environment&quot;</p>
<p>Where:</p>
<!--
          <pre>
        Repository    : The name of the repository (or provider)
                    Server        : The name and port of the server
                    User          : The user identifier
                    Password      : The user password
                    SecurityCtx   : A string representing the security context (Role.Organization.Project)
                    Environment   : A PLM Environment containing a modeler customization
          </pre>
-->
<table class="fill">
	<!--
          <tr>
          <th>Repository :</th>
            <th style="width:20px"></th>
            <th>The name of the repository (or provider)</th>
          
            <th class="style2">Repository :</th>
            <th style="width:20px"></th>
            <th class="style3">The name of the repository (or provider)</th>
           
          </tr>
          -->
	<tr>
		<th>Parameter</th>
		<th>description</th>
	</tr>
	<tr>
		<td>Repository</td>
		<td>The name of the repository (or provider)</td>
	</tr>
	<tr>
		<td>Server</td>
		<td>The name and port of the server</td>
	</tr>
	<tr>
		<td>User</td>
		<td>The user identifier</td>
	</tr>
	<tr>
		<td>Password</td>
		<td>The user password</td>
	</tr>
	<tr>
		<td>SecurityCtx</td>
		<td>A string representing the security context (Role.Organization.Project)</td>
	</tr>
	<tr>
		<td>Environment</td>
		<td>A PLM Environment containing a modeler customization</td>
	</tr>
</table>
<p><strong>Example:</strong>:</p>
<pre class="code">mkrun -c &quot;CAALmiScopeLink PLM1 ve4al10dsy:8090 uxodtipt Ovb2pcds VPMADMIN.ADMIN.DEFAULT VPM&quot;</pre>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Where"></a>Where to Find the CAALmiScopeLink Code.</h3>
<p>The CAALmiScopeLink use case is made of a file located in the CAALmiScopeLink.m 
module of the CAAPPRSystemItf.edu framework:</p>
<p><code>InstallRootFolder\CAADoc\CAAPPRSystemItf.edu\CAALmiScopeLink.m</code></p>
<p><em>Main files:</em></p>
<pre class="code">CAAPPRSystemItf.edu/CAALmiScopeLink.m/src/CAALmiScopeLink.cpp
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiSessionServices.h
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiFindServices.h
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiReleaseServices.h
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiSessionServices.cpp
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiFindServices.cpp
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiReleaseServices.cpp</pre>
<pre class="code">CAAPLMClientAdapter.edu/PublicInterfaces/CAAAdpCreateCloseSession.h</pre>
<p><em>Documented Framework (CAA files):</em></p>
<pre class="code"><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'class', 'CATAdpDictionaryServices');return false;">/PublicInterfaces/CATAdpDictionaryServices.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'class', 'CATAdpQueryServices');return false;">/PublicInterfaces/CATAdpQueryServices.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'class', 'CATAdpOpenSaveServices');return false;">/PublicInterfaces/CATAdpOpenSaveServices.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'class', 'CATAdpIdentificationSet');return false;">/PublicInterfaces/CATAdpIdentificationSet.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'class', 'CATLISTP(CATAdpQueryResult)');return false;">/PublicInterfaces/CATLISTP_CATAdpQueryResult.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIdentificationAccess', 'interface', 'CATIAdpType');return false;">/PublicInterfaces/CATIAdpType.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIdentificationAccess', 'interface', 'CATIAdpPLMIdentificator');return false;">/PublicInterfaces/CATIAdpPLMIdentificator.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess');return false;">CATPLMIntegrationAccess</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMIntegrationAccess', 'interface', 'CATIAdpEnvironment');return false;">/PublicInterfaces/CATIAdpEnvironment.h</a></pre>
<pre class="code">
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemAuth');return false;">/PublicInterfaces/DELIPPRSystemAuth.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemNav');return false;">/PublicInterfaces/DELIPPRSystemNav.h</a></pre>
<pre class="code">
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'interface', 'CATIPLMNavReference');return false;">/PublicInterfaces/CATIPLMNavReference.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'class', 'CATListPtrCATIPLMNavReference');return false;">/PublicInterfaces/CATListPtrCATIPLMNavReference.h</a></pre>
<pre class="code"><a href="#" onclick="javascript:CAAlink('CPP', 'ObjectModelerBase');return false;">ObjectModelerBase</a><a href="#" onclick="javascript:CAAlink('CPP', 'ObjectModelerBase', 'class', 'CATOmbLifeCycleRootsBag');return false;">/PublicInterfaces/CATOmbLifeCycleRootsBag.h</a></pre>
<pre class="code"><a href="#" onclick="javascript:CAAlink('CPP', 'ProductStructureInterfaces');return false;">ProductStructureInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'ProductStructureInterfaces', 'function', 'CATPrdGetOccurrenceMngt');return false;">/PublicInterfaces/CATPrdGetOccurrenceMngt.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'ProductStructureInterfaces');return false;">ProductStructureInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'ProductStructureInterfaces', 'interface', 'CATIPrdOccurrenceMngt');return false;">/PublicInterfaces/CATIPrdOccurrenceMngt.h</a></pre>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Step"></a>Step-by-Step</h2>
<p>There are four logical steps in CAALmiScopeLink:</p>
<ol>
	<li><a href="#1">Retrieving the DELIPPRSystemAuth and DELIPPRSystemNav Interfaces</a></li>
	<li><a href="#2">Querying Root System and Root Process References in the Database</a></li>
	<li><a href="#3">Creating the Process/System Scope</a></li>
	<li><a href="#4">Navigating Scope Links between System and Process References</a></li>
</ol>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="1"></a>Retrieving the DELIPPRSystemAuth and DELIPPRSystemNav Interfaces</h3>
<pre class="code">DELIPPRSystemAuth_var hPPRSystemAuth;
rc = ::GetPPRSystemAuth(hPPRSystemAuth);
            
DELIPPRSystemNav_var hPPRSystemNav;
rc = ::GetPPRSystemNav(hPPRSystemNav);</pre>
<p>The DELIPPRSystemAuth interface will later be used to create a scope link between 
System and Process and the DELIPPRSystemNav interface to navigate along it.</p>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="2"></a>Querying Root System and Root Process References in the 
Database</h3>
<pre class="code">CATOmbLifeCycleRootsBag Bag;
CATAdpAttributeSet AttributeSetSystem;
AttributeSetSystem.AddAttribute(&quot;PLM_ExternalID&quot;,&quot;GeneralSystem.1&quot;); 
AttributeSetSystem.AddAttribute(&quot;V_version&quot;,&quot;---&quot;); 

CATIType_var spTypeSystem;
rc = CATCkePLMNavPublicServices::RetrieveKnowledgeType(&quot;DELLmiGeneralSystemReference&quot;,spTypeSystem);

CATIPLMNavReference * piRootSystem = NULL;
int ret = CAALmiFindServices::FindReference( piEnv, Bag, AttributeSetSystem, spTypeSystem, IID_CATIPLMNavReference, (void **)&amp;piRootSystem);

CATAdpAttributeSet AttributeSetProcess;
AttributeSetProcess.AddAttribute(&quot;PLM_ExternalID&quot;,&quot;Assemble.1&quot;); 
AttributeSetProcess.AddAttribute(&quot;V_version&quot;,&quot;---&quot;); 

CATIType_var spTypeProcess;
rc = CATCkePLMNavPublicServices::RetrieveKnowledgeType(&quot;DELFmiFunctionReference&quot;,spTypeProcess);

CATIPLMNavReference * piRootProcess = NULL;
ret = CAALmiFindServices::FindReference( piEnv, Bag, AttributeSetProcess, spTypeProcess, IID_CATIPLMNavReference, (void **)&amp;piRootProcess);</pre>
<p>The DELIPPRSystemAuth interface will be later used to create relation between 
System and Process and to navigate along it.</p>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="3"></a>Creating the Process/System Scope</h3>
<pre class="code">
 rc = hPPRSystemAuth-&gt;CreateScope(hNavRefOnRootSystem, hNavRefOnRootProcess);</pre>
<p>The scope is created from 2 CATIPLMNavReference.</p>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="4"></a>Navigating Scope Links between System and Process References</h3>
<pre class="code">
 CATListPtrCATIPLMNavReference listProcessReferences;
rc = hPPRSystemNav-&gt;GetProcessOfEachScope(hNavRefOnRootSystem, listProcessReferences);
CATListPtrCATIPLMNavReference listSystemReferences;
rc = hPPRSystemNav-&gt;GetSystemOfEachScope(hNavRefOnRootProcess, listSystemReferences);</pre>
<p>Using the DELIPPRProcessNav interface, references are navigated in both direction, 
from the System to the Process and then in the other direction. As DELIPPRProcessNav 
scope targeted method do suggest, scope may contains several Process or System references 
for a single Root reference. For example in the GetSystemOfEachScope case, all process 
references defining scopes pointing the given input reference are retrieved as such:</p>
<table>
	<caption>Fig. 2: GetSystemOfEachScope Results</caption>
	<tr>
		<td>
		<img src="images/CAALmiScopeLink_Nav.png" style="width: 600px" alt="GetSystemOfEachScope results"/></td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="InShort"></a>In Short</h2>
<p>System references may be assigned to Process references via Scope Links and navigating 
between them is made possible through the DELIPPRProcessNav Class.</p>
<script type="text/javascript">insertLinkToTop()</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="References"></a>References</h2>
<table class="reference">
	<tr>
		<td>[1]</td>
		<td>
		<a href="../CAADocUseCases/CAADocRunSample.htm">
		Building and Launching a Use Case</a></td>
	</tr>
	<tr>
		<td>[2]</td>
		<td>
		<a href="../CAAFmiProcess/CAAFmiUcCreateStructure.htm">
		Creating a Process Structure</a></td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [August 2010]</td>
		<td>Document created</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>

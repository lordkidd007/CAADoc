<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Language" content="en-us" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="../CAADocStyleSheets/caav5.css"/>
<script type="text/javascript" src="../CAADocJavaScript/DSDocTocToc.js">/* */</script>
<script type="text/javascript" src="../CAADocJavaScript/DSDocHighlight.js">/* */</script>
<script type="text/javascript" src="../CAADocJavaScript/submit.js">/* */</script>
<title>Managing Candidate Resource Scope Links and Candidate Resource Links</title>
</head>

<body onload="highlightSearchTerms();">

<table class="DocHeader">
	<tr>
		<td class="DocHeader1">
		<h1><a name="Top"></a>Managing Candidate Resource Scope Links and Candidate Resource Links</h1>
		</td>
	</tr>
	<tr>
		<td class="use">Use Case</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<table class="abstract">
	<tr>
		<td>
		<h2>Abstract</h2>
		<p>This article describes an example of use of Framework DELPPRSystemItf</p>
		<p>This use case shows, how to create candidate resource links between systems and resource occurrences; 
		    how to get the number of candidate resources and the list of all resources linked as candidate resources;
            how to remove the links created.</p>
		<ul>
			<li><a href="#Learn">What You Will Learn With This Use Case</a></li>
			<li><a href="#UseCase">The CAALmiCandidateRsc Use Case</a>
			<ul>
				<li><a href="#What">What Does CAALmiCandidateRsc Do</a></li>
				<li><a href="#How">How to Launch CAALmiCandidateRsc</a></li>
				<li><a href="#Where">Where to Find the CAALmiCandidateRsc Code</a>
				</li>
			</ul>
			</li>
			<li><a href="#Step">Step-by-Step</a></li>
			<li><a href="#InShort">In Short</a></li>
			<li><a href="#References">References</a></li>
		</ul>
		</td>
	</tr>
</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Learn"></a>What You Will Learn With This Use Case</h2>
<p>In this use case, you will learn how to use the DELIPPRSystemAuth and DELIPPRSystemNav 
interfaces in order to:</p>
<ul>
	<li>Create a candidate resource scope link between the root resource and root system.</li>
	<li>Create candidate resource links between the system and resource occurrences.</li>
    <li>Get the number of candidate resources associated with a particular system.</li>
	<li>Get the list of candidate resources.</li>
	<li>Remove a resource associated as candidate with the system occurrence and Remove all candidate resources.</li>
	<li>Remove the candidate resource scope link.</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="UseCase"></a>The CAALmiCandidateRsc Use Case</h2>
<p>CAALmiCandidateRsc is a use case of the CAAPPRSystemItf.edu framework that 
illustrates DELPPRSystemItf framework capabilities.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="What"></a>What Does CAALmiCandidateRsc Do</h3>
<ul>
	<li>Query root system and resource references.</li>
	<li>Inserts them into the Bag.</li>
	<li>Gets the system occurrence and all the resource occurrences.</li>
	<li>Creates Candidate Resource scope links for system.</li>
	<li>Creates Candidate Resource links for system with all resource occurrence.</li>
	<li>Gets the number of Candidate Resource.</li>
	<li>Gets the Candidate Resource link for first resource occurrence.</li>
	<li>Remove Candidate Resource link for the first resource occurrence.</li>
	<li>Remove All Candidate Resource Links.</li>
	<li>Remove Candidate Resource Scope link.</li>
</ul>
<p><strong>Candidate Resource Link Creation</strong></p>
<table>
	<caption>Fig. 1 : Structure of This Use Case to Show Candidate Resource Links</caption>
	<tr>
		<td>
		<img src="images/CAALmiCandidateRsc_Structure.png" alt="Model Structure"/>
		</td>
	</tr>
</table>
<p><strong>Use Case Objects</strong>: <code>CAALmiCandidateRsc</code></p>
<p><strong>Expected Result</strong>: The result is a return code, its value is:</p>
<ul>
	<li>0 on successful completion</li>
	<li>1 if execution failed.</li>
</ul>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="How"></a>How to Launch CAALmiCandidateRsc</h3>
<p>To launch CAALmiCandidateRsc, you will need to set up the build time environment, 
then compile CAALmiCandidateRsc along with its prerequisites, set up the run time 
environment, and then execute the use case [<a href="#References">1</a>].</p>
<p><strong>Additional Instructions</strong>:</p>
<p>mkrun -c &quot;CAALmiCandidateRsc Repository Server User 
Password SecurityCtx Environment&quot;<br />
where:</p>
<table class="fill">
	<tr>
		<th>Parameter</th>
		<th>Description</th>
	</tr>
	<tr>
		<td>Repository</td>
		<td>The name of the repository (or provider)</td>
	</tr>
	<tr>
		<td>Server</td>
		<td>The name and port of the server</td>
	</tr>
	<tr>
		<td>User</td>
		<td>The user identifier</td>
	</tr>
	<tr>
		<td>Password</td>
		<td>The user password</td>
	</tr>
	<tr>
		<td>SecurityCtx</td>
		<td>A string representing the security context (Role.Organization.Project)</td>
	</tr>
	<tr>
		<td>Environment</td>
		<td>A PLM Environment containing a modeler customization</td>
	</tr>
</table>
<p><strong>Example:</strong> <code>mkrun -c &quot;CAALmiCandidateRsc PLM1 ve4al10dsy:8090 uxodtipt 
Ovb2pcds VPMADMIN.ADMIN.DEFAULT VPM&quot;</code></p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="Where"></a>Where to Find the CAALmiCandidateRsc Code.</h3>
<p>The CAALmiCandidateRsc use case is made of a file located in the CAALmiCandidateRsc.m 
module of the CAAPPRSystemItf.edu framework:</p>
<p><code>InstallRootFolder\CAADoc\CAAPPRSystemItf.edu\CAALmiCandidateRsc.m</code></p>
<p><em>Main files:</em></p>
<pre class="code">CAAPPRSystemItf.edu/CAALmiCandidateRsc.m/src/CAALmiCandidateRsc.cpp
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiSessionServices.h
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiFindServices.h
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiReleaseServices.h
CAAPPRSystemItf.edu/ProtectedInterfaces/CAALmiOccurrenceServices.h
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiSessionServices.cpp
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiFindServices.cpp
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiReleaseServices.cpp
CAAPPRSystemItf.edu/CAALmiServices.m/src/CAALmiOccurrenceServices.cpp</pre>
<pre class="code">CAAPLMClientAdapter.edu/PublicInterfaces/CAAAdpCreateCloseSession.h</pre>
<p><em>Documented Frameworks (CAA files):</em></p>
<pre class="code">
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemOccAuth');return false;">/PublicInterfaces/DELIPPRSystemOccAuth.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemAuth');return false;">/PublicInterfaces/DELIPPRSystemAuth.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemNav');return false;">/PublicInterfaces/DELIPPRSystemNav.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemCandidateRscAuth');return false;">/PublicInterfaces/DELIPPRSystemCandidateRscAuth.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf');return false;">DELPPRSystemItf</a><a href="#" onclick="javascript:CAAlink('CPP', 'DELPPRSystemItf', 'interface', 'DELIPPRSystemCandidateRscNav');return false;">/PublicInterfaces/DELIPPRSystemCandidateRscNav.h</a></pre>
<pre class="code">
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'interface', 'CATIPLMNavReference');return false;">/PublicInterfaces/CATIPLMNavReference.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'class', 'CATListPtrCATIPLMNavReference');return false;">/PublicInterfaces/CATListPtrCATIPLMNavReference.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'interface', 'CATIPLMNavEntity');return false;">/PublicInterfaces/CATIPLMNavEntity.h</a>
<a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces');return false;">CATPLMComponentInterfaces</a><a href="#" onclick="javascript:CAAlink('CPP', 'CATPLMComponentInterfaces', 'class', 'CATListPtrCATIPLMNavEntity');return false;">/PublicInterfaces/CATListPtrCATIPLMNavEntity.h</a></pre>
<pre class="code">
<a href="#" onclick="javascript:CAAlink('CPP', 'ObjectModelerBase');return false;">ObjectModelerBase</a><a href="#" onclick="javascript:CAAlink('CPP', 'ObjectModelerBase', 'class', 'CATOmbLifeCycleRootsBag');return false;">/PublicInterfaces/CATOmbLifeCycleRootsBag.h</a>
</pre>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="Step"></a>Step-by-Step</h2>
<p>There are ten logical steps in CAALmiCandidateRsc:</p>
<ol>
	<li><a href="#1">Retrieving the DELIPPRSystemAuth, DELIPPRSystemNav Interfaces and DELIPPRSystemCandidateRscAuth and DELIPPRSystemCandidateRscNav 
	Interfaces</a></li>
	<li><a href="#2">Querying Root System and Root Resource References in the Database.</a><ol>
		<li><a href="#2">Root Resource and Root System references are inserted into the bag</a></li>
	</ol>
	</li>
	<li><a href="#3">Retrieving the System Occurrence and All Resource Occurrences</a></li>
	<li><a href="#4">Creating Candidate Resource Scope Links for System</a></li>
	<li><a href="#5">Creating Candidate Resource Links for System with the Resource Occurrence</a></li>	
    <li><a href="#6">Getting the Number of Candidate Resources</a></li>
	<li><a href="#7">Getting the Candidate Resource Link for a Resource Occurrence</a></li>
	<li><a href="#8">Removing Candidate Resource Link for the Resource Occurrence</a></li>
	<li><a href="#9">Removing all Candidate Resource Links</a></li>
	<li><a href="#10">Removing Candidate Resource Scope Link</a></li>
</ol>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="1"></a>Retrieving the DELIPPRSystemAuth, DELIPPRSystemNav Interfaces and DELIPPRSystemCandidateRscAuth and DELIPPRSystemCandidateRscNav 
Interfaces</h3>
<pre class="code">DELIPPRSystemAuth_var spPPRSystemAuth;
rc = ::GetPPRSystemAuth(spPPRSystemAuth);
DELIPPRSystemNav_var spPPRSystemNav;
rc = ::GetPPRSystemNav(spPPRSystemNav);
DELIPPRSystemCandidateRscNav_var spCandidateRscNav = spPPRSystemNav;
DELIPPRSystemCandidateRscAuth_var spCandidateRscAuth = spPPRSystemAuth;</pre>
<p>The DELIPPRSystemCandidateRscAuth interface will be used to create and remove the candidate resources links and the DELIPPRSystemCandidateRscNav interface to get the linked resources.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="2"></a>Querying Root System and Root Resource References in the 
Database</h3>
<pre class="code">CATOmbLifeCycleRootsBag Bag;
CATAdpAttributeSet AttributeSetSystem;
AttributeSetSystem.AddAttribute("PLM_ExternalID","GeneralSystem1"); 
AttributeSetSystem.AddAttribute("V_version","---"); 

CATIType_var spTypeSystem;
rc = CATCkePLMNavPublicServices::RetrieveKnowledgeType("DELLmiGeneralSystemReference",spTypeSystem);

CATIPLMNavReference * piRootSystem = NULL;
int ret = CAALmiFindServices::FindReference(Bag, AttributeSetSystem, 
						spTypeSystem, 
						IID_CATIPLMNavReference, 
						(void **)&amp;piRootSystem);
											
CATAdpAttributeSet AttributeSetResource;
AttributeSetResource.AddAttribute("PLM_ExternalID","ResourceOrg1"); 
AttributeSetResource.AddAttribute("V_version","---"); 

CATIType_var spTypeResource;
rc = CATCkePLMNavPublicServices::RetrieveKnowledgeType("VPMReference",spTypeResource);

CATIPLMNavReference * piRootResource = NULL;
ret = CAALmiFindServices::FindReference(Bag,AttributeSetResource, 
					spTypeResource, 
					IID_CATIPLMNavReference, 
					(void **)&amp;piRootResource);
</pre>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="3"></a>Retrieving the System Occurrence and All Resource 
Occurrences</h3>
<pre class="code">CATIPLMNavOccurrence_var spRootSystemNavOcc;
rc = CAALmiOccurrenceServices::GetOccurrenceFromSystemReference(hNavRefOnRootSystem, spRootSystemNavOcc);
CATIPLMNavOccurrence_var spRootResourceNavOcc;
rc = CAALmiOccurrenceServices:: GetOccurrenceFromResourceReference(hNavRefOnRootResource, spRootResourceNavOcc);

CATIPLMNavOccurrence * piResourceOcc = spRootResourceNavOcc;
CATListPtrCATIPLMNavOccurrence ChildrenResourceOccList;
rc = piResourceOcc-&gt;ListChildren(ChildrenResourceOccList);</pre>
<p>After retrieving the resource occurrence on the root resource,  a method &quot;piResourceOcc-&gt;ListChildren&quot; 
is used to retrieve all the child occurrences of the resources.</p>
<h3><a name="4"></a>Creating Candidate Resource Scope Links for System</h3>
<pre class="code">
rc =  spCandidateRscAuth-&gt;CreateCandidateResourceScopeLink(spRootSystemNavOcc, piRootResource);
</pre>
<p>DELIPPRSystemCandidateRscAuth performs the creation of scope link between root system and resource</p>
<h3><a name="5"></a>Creating Candidate Resource Links for System with the 
Resource Occurrence</h3>
<pre class="code">
CATIPLMNavOccurrence* piFirstResourceOcc = ChildrenResourceOccList[1];
rc =  spCandidateRscAuth&gt;CreateCandidateResourceLink(spRootSystemNavOcc, piFirstResourceOcc);
</pre>											
<p>Using the DELIPPRSystemCandidateRscAuth interface, candidate resource links are created. This process can be repeated 
multiple times for all resource occurrences.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="6"></a>Getting the Number of Candidate Resources</h3>
<pre class="code">
int NbCandidateRsc =  0;
rc  = spCandidateRscNav-&gt;GetNumberOfCandidateResources(spRootSystemNavOcc,NbCandidateRsc);</pre>											
<p>Using the DELIPPRSystemCandidateRscNav interface, the number of resources linked as candidates 
is obtained.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="7"></a>Getting the Candidate Resource Link for a Resource 
Occurrence</h3>
<pre class="code">
CATLISTP(CATIPLMNavOccurrence) ListOfCandidateResourceOccurrence;
int Index = 1;
rc  = spCandidateRscNav-&gt;GetCandidateResource(spRootSystemNavOcc, Index, ListOfCandidateResourceOccurrence, piRootResource);
</pre>											
<p>Using the DELIPPRSystemCandidateRscNav interface, the candidate resource is retrieved.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="8"></a>Removing Candidate Resource Link for the Resource Occurrence</h3>
<pre class="code">
rc  = spCandidateRscAuth-&gt;RemoveCandidateResourceLink(spRootSystemNavOcc, piFirstResourceOcc);</pre>											
<p>Using the DELIPPRSystemCandidateRscAuth interface, the candidate resource link created is removed with the first resource.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="9"></a>Removing all Candidate Resource Links</h3>
<pre class="code">
rc  = spCandidateRscAuth-&gt;RemoveAllCandidateResourceLinks(spRootSystemNavOcc);</pre>											
<p>Here, all the resources linked are removed.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h3><a name="10"></a>Removing Candidate Resource Scope Link</h3>
<pre class="code">
rc  = spCandidateRscAuth-&gt;RemoveCandidateResourceScopeLink(spRootSystemNavOcc);</pre>											
<p>The candidate resource scope link is removed using the DELIPPRSystemCandidateRscAuth.</p>
<script type="text/javascript">insertLinkToTop();</script>
<h2><a name="InShort"></a>In Short</h2>
<p>Resources can be assigned as candidate resources on systems using the candidate resource links and using appropriate APIs 
candidate resources can be retrieved and be unassigned.</p>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="References"></a>References</h2>
<table class="reference">
	<tr>
		<td>[1]</td>
		<td>
		<a href="../CAADocUseCases/CAADocRunSample.htm">
		Building and Launching a Use Case</a></td>
	</tr>
	</table>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<h2><a name="History"></a>History</h2>
<table class="history">
	<tr>
		<td>Version: <strong>1</strong> [Jul 2012]</td>
		<td>Document created</td>
	</tr>
</table>
<script type="text/javascript">insertLinkToTop();</script>
<!-- -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-comment-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->
<script type="text/javascript">insertCopyright();</script>

</body>

</html>
